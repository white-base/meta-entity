!function(e){"use strict";var t="undefined"==typeof window;e._L=e._L||{},e._L.Common=e._L.Common||{};var r=function(){function e(){}e._NS="Common";var t="kor",r=!1,n={eng:{E:{S01:{0:{msg:"{$1}",long:"Etc Error",memo:""},1:{msg:'Failed to import module ["$1"]',long:'Load the ["$1"] module through require("...$2"). ',memo:"1: class name, 2: file name"},2:{msg:'Failed to import function ["$1"()]',long:'Invoke the ["$1"()] function through require("...$2"). ',memo:"1: function name, 2: file name"},3:{msg:"[$1] is an abstract method.",long:""},4:{msg:"[$1] should set [$2]. ",long:""},5:{msg:"Linking reference [$2] to [$1] failed. ",long:""},6:{msg:"You cannot enter [$1] and [$2] at the same time. ",long:""},7:{msg:"Class [$1] must implement [$2]. ",long:"$3"},8:{msg:"[$1] cannot create an abstract class.",long:""},9:{msg:"Failed to register collection [$1].",long:"[$2]"},10:{msg:"Failed to retrieve [$1] from [$2].",long:"$3"},11:{msg:"You need to redefine [$1].",long:"Inherit and redefine [$2]."}},S02:{1:{msg:"[$1] can only be of type [$2].",long:""},2:{msg:"[$1] is a type that cannot be processed. ",long:""},3:{msg:"[$1] type cannot be [$2]. ",long:""},4:{msg:"[$1] is not of type [$2]. ",long:""},5:{msg:"[$1] does not have a type. ",long:""},6:{msg:"Type [$1] does not exist. ",long:""},7:{msg:"There is no [$2] of type [$1]. ",long:"Define [$2]."}},S03:{1:{msg:"[$1] is not an object. ",long:""},2:{msg:"[$1] is not an instance of [$2]. ",long:""},3:{msg:"[$1] is not an object that implements the [$2] interface. ",long:""},4:{msg:"The object in [$1] is different from [$2]. ",long:""}},S04:{1:{msg:"A duplicate occurred in [$1]. ",long:"$2"},2:{msg:"[$1] overlaps with [$2]. ",long:""},3:{msg:"Duplicate [$1] is prohibited. ",long:""},4:{msg:"Cannot remove [$2] because [$1] exists. ",long:""},5:{msg:"Cannot add [$2] because [$1] exists. ",long:""},6:{msg:"[$2] exists in [$1]. ",long:""},7:{msg:"[$3] cannot be added because [$2] exists in [$1]. ",long:""},8:{msg:"[$1] is a reserved word. ",long:""}},S05:{1:{msg:"Required value [$1] is missing. ",long:""},2:{msg:"[$1] requires [$2]. ",long:""},3:{msg:"[$2] does not exist in [$1]. ",long:""},4:{msg:"[$1] is not a valid character in the [$2] test. ",long:"test result : $3"},5:{msg:"You cannot enter a space in [$1]. ",long:""},6:{msg:"Constraint failed on [$1]. ",long:"$2"}},S06:{1:{msg:"The size of [$1] exceeds the range.",long:""},2:{msg:"[$1] cannot be less than [$2]. ",long:""},3:{msg:"[$1] and [$2] have different lengths. ",long:""},4:{msg:"[$1] is a private type. You cannot set it directly. ",long:"If you want to force it, set it to __SET$$1(val, target object)."},5:{msg:"and(&&) condition check failed. ",long:"$1"},6:{msg:"or(||) condition check failed. ",long:"$1"},7:{msg:"[$1] ranges from [$2] to [$3].",long:""},8:{msg:"[$1] does not match rule [$2].",long:""},9:{msg:"[$1] Condition check failed. ",long:"$2"}}},W:{S01:{1:{msg:"[$1] target [$2] cannot be deleted.",long:'If you set "configurable = true, writable = true" you can delete it later. '}}},W:{S01:{1:{msg:"",long:""}}},I:{S01:{1:{msg:"[$2] [$1]",long:""}}}},kor:{E:{S01:{0:{msg:"{$1}",long:"기타 오류",memo:"1: 오류내용"},1:{msg:'["$1"] 모듈을 가져오는데 실패하였습니다.',long:"",memo:"1:클래스명, 2:파일명"},2:{msg:'["$1"()] 함수를 가져오는데 실패하였습니다.',long:"",memo:"1:함수명, 2:파일명"},3:{msg:"[$1]는 [$2] 처리가 실패하였습니다.",long:"",memo:"1:처리 대상, 2:처리 내용"}},S02:{1:{msg:"[$1]는 [$2] 타입만 가능합니다.",long:"",memo:"1:검사 대상, 2: 대상의 타입"},2:{msg:"[$1]는 처리할 수 없는 타입니다.",long:"",memo:"1:실패 대상 타입"},3:{msg:"[$1]는 [$2]타입이 아닙니다.",long:"",memo:"1:검사 대상, 2: 목표 타입"}},S03:{1:{msg:"[$1]는 객체가 아닙니다.",long:"",memo:"1:검사 대상"},2:{msg:"[$1]는 [$2]의 인스턴스가 아닙니다.",long:"",memo:"1:대상이름, 2:생성자"},3:{msg:"[$1]의 객체가 [$2]와 다릅니다.",long:"",memo:"1:비교 대상, 2:목표 대상"}},S04:{1:{msg:"[$1]는 [$2]와 중복이 발생했습니다.",long:"",memo:"1:대상, 2:목표"},2:{msg:"[$1]에 [$2]가 존재하여 [$3]를 재거 할 수 없습니다.",long:"",memo:"1:목표, 2:중복대상, 3:제거대상"},3:{msg:"[$1]에 [$1]가 존재하여 [$3]를 추가 할 수 없습니다.",long:"",memo:"1:목표, 2:중복대상, 3:추가대상"},4:{msg:"[$1]는 예약어 입니다.",long:"",memo:"1:중복예약어"}},S05:{1:{msg:"필수값 [$1]이 없습니다.",long:"",memo:"1:필수값"},2:{msg:"[$1]에는 [$2]이 필요합니다.",long:"",memo:"1:대상, 2:필수조건"},3:{msg:"[$1]에 [$2]이 존재하지 않습니다.",long:"",memo:"1:대상, 2:필수조건"},4:{msg:"[$1]에 공백을 입력할 수 없습니다.",long:"",memo:"1:대상"}},S06:{1:{msg:"[$1]의 [$2] 범위를 초과하였습니다.",long:"",memo:"1:대상, 2: 범위"},2:{msg:"[$1]는 [$2]보다 작을 수가 없습니다.",long:"",memo:"1:대상, 2: 기준"},3:{msg:"[$1]와 [$2]의 길이가 다릅니다.",long:"",memo:"1:대상, 2: 목표"},4:{msg:"and(&&) 조건 검사에 실패하였습니다. $1",long:"",memo:"1:조건"},5:{msg:"or(||) 조건 검사에 실패하였습니다. $1",long:"",memo:"1:조건"},6:{msg:"[$1]의 범위는 [$2]에서 [$3]까지 입니다. ",long:"",memo:"1:대상, 2:시작, 3: 종료"}},L01:{100:{msg:"util-type.js match"},101:{msg:"타입 매치 : $1 의 세부 타입을 지정해야 합니다. $1: $2"},102:{msg:"타입 매치 : target 은 '$1' 타입이 아닙니다. tarType: $2"},103:{msg:"타입 매치 : 처리할 수 없는 타입니다. "},111:{msg:"배열 매치 : target 은 array 타입이 아닙니다. tarType: $1"},112:{msg:"배열 매치 : array(_ANY_) 타입은 target array 의 요소가 하나 이상 가지고 있어야 합니다. target.length = $1"},113:{msg:"배열 매치 : array(_SEQ_) 타입의 길이보다 target array 의 길이가 작습니다. extType.length = $1, target.length = $2"},114:{msg:"배열 매치 : array(_SEQ_) [$1]번째 리터럴 타입이 target 값과 다릅니다. extType[$1] = $2, target[$1] = $3"},115:{msg:"배열 매치 : array(_SEQ_) [$1]번째 타입 검사가 실패하였습니다. extType[$1] = $2"},116:{msg:"배열 매치 : array(_REQ_) 타입은 target array 의 요소가 하나 이상 가지고 있어야 합니다. target.length = $1"},117:{msg:"배열 매치 : array($1) 는 처리할 수 없는 array 타입 종류입니다."},118:{msg:"배열 매치 : array 요소 검사가 실패하였습니다. extType: $1, tarType: $2"},121:{msg:"초이스 매치 : choice(_ANY_) 타입에 'undefined' 은 사용할 수 없습니다."},122:{msg:"초이스 매치 : choice(_NON_) 타입에 'undefined' 만 가능합니다."},123:{msg:"초이스 매치 : choice(_ERR_) 타입에 Errror 인스턴스 만 가능합니다."},124:{msg:"초이스 매치 : choice(_EUM_) 타입의 세부 타입은 리터럴만 가능합니다. extType[$1]: $2"},125:{msg:"초이스 매치 : choice(_DEF_) 타입의 첫번째 세부 타입은 리터럴만 가능합니다. extType[0]: $1"},126:{msg:"초이스 매치 : choice($1) 는 처리할 수 없는 choice 타입 종류입니다."},127:{msg:"초이스 매치 : choice 세부 타입 검사가 실패하였습니다. extType: $1, tarType: $2"},131:{msg:"클래스 매치 : class 타입을 union 타입으로 생성 후 검사에 실패하였습니다. (opt = 1)"},132:{msg:"클래스 매치 : target은 [$1]의 인스턴스가 아닙니다."},133:{msg:"클래스 매치 : target 이 class, object, union 타입이 아닙니다. tarType: $1"},141:{msg:"유니언 매치 : target 은 union 타입이 아닙니다. tarType: $1"},142:{msg:"유니언 매치 : target['$1'] 키가 존재하지 않습니다. extType['$1'] = $2"},143:{msg:"유니언 매치 : '$1' 타입 검사가 실패하였습니다."},151:{msg:"함수 매치 : target 은 function 타입이 아닙니다. tarType: $1"},152:{msg:"함수 매치 : 선언한 extType.name = '$1' 과 target name 이 일치하지 않습니다. function.name = '$2'"},153:{msg:"함수 매치 : extType.func 을 선언하였는데 target.func 이 functon 타입이 아닙니다."},154:{msg:"함수 매치 : extType.func 과 target.func 서로 다릅니다.(proto check)"},155:{msg:"함수 매치 : target의 params 또는 return 객체를 설정해야 합니다. extType.param = $1, extType.return = $2"},156:{msg:"함수 매치 : params 허용검사가 거부되었습니다. <array(_SEQ_) 변환>"},157:{msg:"함수 매치 : return 허용검사가 거부되었습니다."},200:{msg:"util-type.js allow"},201:{msg:"타입 허용 : $1 의 세부 타입을 지정해야 합니다. $1: $2"},202:{msg:"타입 허용 : $1 타입의 리터럴 값과 다릅니다. extType = $2, tarType = $3"},203:{msg:"타입 허용 : $1 타입이 아닙니다. tarType = $2"},204:{msg:"타입 허용 : 처리할 수 없는 타입입니다."},211:{msg:"배열 허용 : array 타입이 아닙니다. tarType: $1"},212:{msg:"타입 허용 : array(_ANY_) 타입에 array(_ALL_, _OPT_) 타입을 허용하지 않습니다. tarType: $1"},213:{msg:"배열 허용 : array(_SEQ_) 타입에 array(_SEQ_) 타입만 허용합니다. tarType: $1"},214:{msg:"배열 허용 :extType 의 array(_SEQ_) 타입의 길이보다 tarType 은 같거나 커야합니다. extType.length = $1, target.length = $2"},215:{msg:"배열 허용 : array(_SEQ_) [$1]번째 타입 검사가 실패하였습니다."},216:{msg:"배열 허용 : array(_REQ_) 타입에 array(_ALL_, _ANY_, _OPT_) 타입을 허용하지 않습니다. tarType: $2"},217:{msg:"배열 허용 : array(_OPT_) 타입에 array(_ALL_, _ANY_) 타입을 허용하지 않습니다. tarType: $2"},218:{msg:"배열 허용 : array($1) 는 처리할 수 없는 array 타입 종류입니다."},219:{msg:"배열 허용 : array 요소 검사가 실패하였습니다. extType: $1, tarType: $2"},221:{msg:"초이스 허용 : choice(_ALL_) 타입에 choice(_ERR_) 타입을 허용하지 않습니다. tarType: $1"},222:{msg:"초이스 허용 : choice(_ANY_) 타입에 'undefined' 타입은 사용할 수 없습니다."},223:{msg:"초이스 허용 : choice(_ANY_) 타입에 choice(_NON_, _ERR_), 'undefined' 타입을 허용하지 않습니다. tarType: $1"},224:{msg:"초이스 허용 : choice(_NON_) 타입에 choice(_NON_) 타입만 허용합니다. tarType: $1"},225:{msg:"초이스 허용 : choice(_ERR_) 타입에 choice(_ERR_) 타입만 가능합니다. tarType: $1"},226:{msg:"초이스 허용 : choice(_REQ_) 타입에 choice(_ALL_, _ANY_, _OPT_, _NON_, _ERR_) 타입을 허용하지 않습니다. tarType: $1"},227:{msg:"초이스 허용 : choice(_OPT_) 타입에 choice(_ALL_, _ANY_, _NON_, _ERR_) 타입을 허용하지 않습니다. tarType: $1"},228:{msg:"초이스 허용 : choice(_EUM_) 타입에 choice(_EUM_) 타입만 가능합니다."},229:{msg:"초이스 허용 : choice(_EUM_) 의 세부 타입은 리터럴만 가능합니다. extType[$1]: $2"},"22A":{msg:"초이스 허용 : tarType choice(_EUM_) 의 세부 타입은 리터럴만 가능합니다. tarType[$1]: $2"},"22B":{msg:"초이스 허용 : choice(_DEF_) 타입에 choice(_DEF_) 타입만 가능합니다."},"22C":{msg:"초이스 허용 : extType choice(_DEF_) 의 첫번째 세부 타입은 리터럴만 가능합니다. extType[0]: $1"},"22D":{msg:"초이스 허용 : tarType choice(_DEF_) 의 첫번째 세부 타입은 리터럴만 가능합니다. tarType[0]: $1"},"22E":{msg:"초이스 허용 : choice($1) 는 처리할 수 없는 choice 타입 종류입니다."},"22F":{msg:"초이스 허용 : tarType[$1] = $3 타입에 허용하는 extType 이 없습니다. extType = $2"},231:{msg:"클래스 허용 : extType, tarType class 타입을 union 타입으로 생성 후 검사에 실패하였습니다. (opt = 1)"},232:{msg:"클래스 허용 : class to class 허용이 거부 되었습니다. (opt = $1)"},233:{msg:"클래스 허용 : tarType class 타입을 union 타입으로 생성 후 검사에 실패하였습니다. (opt = 1)"},234:{msg:"클래스 허용 : class to union 허용이 거부 되었습니다. (opt = $1)"},235:{msg:"클래스 허용 : tarType 이 class, union 타입이 아닙니다. tarType: $1"},241:{msg:"유니언 허용 : tarType 은 union 타입이 아닙니다. tarType: $1"},242:{msg:"유니언 허용 : tarType['$1'] 키가 존재하지 않습니다. extType['$1'] = $2"},243:{msg:"유니언 허용 : '$1' 타입 검사가 실패하였습니다."},251:{msg:"함수 허용 : tarType 은 function 타입이 아닙니다. tarType: $1"},252:{msg:"함수 허용 : 선언한 extType.name = '$1' 과 target name 이 일치하지 않습니다. function.name = '$2'"},253:{msg:"함수 허용 : extType.func 을 선언하였는데 target.func 이 functon 타입이 아닙니다."},254:{msg:"함수 허용 : extType.func 과 target.func 서로 다릅니다.(proto check)"},255:{msg:"함수 허용 : tarType의 params 또는 return 객체를 설정해야 합니다. extType.param = $1, extType.return = $2"},256:{msg:"함수 허용 : params 허용검사가 거부되었습니다. <array(_SEQ_) 변환>"},257:{msg:"함수 허용 : return 허용검사가 거부되었습니다."},300:{msg:"util-type.js etc"},301:{msg:'파싱 검사 : function 규칙이 아닙니다. "$1"'},302:{msg:'파싱 검사 : function 에 argument, body 내용이 없습니다. "$1"'},303:{msg:"파싱 검사 : function 파싱 실패 $1"},304:{msg:"타입 검사 : [$1]는 처리할 수 스페셜타입 입니다."},305:{msg:"타입 검사 : array($1) 타입은 처리할 수 없는 스페설타입 입니다."},306:{msg:"타입 검사 : choice($1) 타입은 처리할 수 없는 스페셜타입 입니다."},307:{msg:"타입 검사 : array($1) 타입은 처리할 수 없는 타입 입니다."},308:{msg:"타입 검사 : choice($1) 타입은 처리할 수 없는 타입 입니다."},"30A":{msg:"타입 허용 : allowType(extType, tarType) 검사가 실패하였습니다."},"30B":{msg:"타입 매치 : matchType(extType, target) 검사가 실패하였습니다."},"30C":{msg:"ctor 이 function 타입이 아닙니다. typeof ctor = $1"},401:{msg:"implements(ctor, obj, args..); ctor 이 <function> 타입이 아닙니다. typeof ctor == '$1'"},402:{msg:"implements(ctor, obj, args..); obj 이 <object> 타입이 아닙니다. typeof obj == '$1'"},403:{msg:"implements(ctor, obj, args..); args[$1] 이 <function> 타입이 아닙니다. typeof args[$1] == '$2'"},404:{msg:"[$1] 는 [$2] 타입을 구현해야 합니다. $1._KIND = '$3'"},405:{msg:"isImplementOf(target); target 은 <function, string> 타입만 가능합니다. typeof target = '$1'"},500:{msg:""},510:{msg:""},511:{msg:"new Observer(caller); caller 는 'object' 타입이 아닙니다. typeof caller = $1"},512:{msg:"Observer.isLog 는 'boolean' 타입이 아닙니다. typeof isLog = $1"},513:{msg:"Observer.isSingleMode 는 'boolean' 타입이 아닙니다. typeof isSingleMode = $1"},514:{msg:"Observer.__$subscribers 값은  'object' 타입이 아닙니다. typeof __$subscribers = $1"},515:{msg:"Observer.__$subscribers['any'] 객체가 없습니다. { any: undefined }"},516:{msg:"subscribe(fn, code); fn 는 'function' 타입이 아닙니다. typeof fn = $1"}},L02:{100:{msg:"Meta.*"},110:{msg:""},111:{msg:"getTypes(): array<function> 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},112:{msg:"instanceOf(any): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},113:{msg:"equal(any): boolena 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},120:{msg:""},121:{msg:"getObject(opt?, origin?): object 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},122:{msg:"setObject(mObj) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},130:{msg:""},131:{msg:"clone(): object 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},140:{msg:""},150:{msg:""},151:{msg:"add(key) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},152:{msg:"del(key) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},153:{msg:"has(key): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},154:{msg:"find(any): any 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},200:{msg:"Collectoin.*"},210:{msg:""},211:{msg:"add(any): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},212:{msg:"remove(elem): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},213:{msg:"cantains(any): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},214:{msg:"indexOf(any): number 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},220:{msg:""},221:{msg:"insertAt(pos, val, ..): boolean 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},230:{msg:""},231:{msg:"keyOf(idx): string 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},300:{msg:"Meta.Entity.*"},310:{msg:""},311:{msg:"write(opt): object 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},320:{msg:""},321:{msg:"read(object) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},330:{msg:""},331:{msg:"merge(any, opt) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},332:{msg:"copy(filter) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},340:{msg:""},341:{msg:"readSchema(json) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},342:{msg:"writeSchema(opt): object 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},350:{msg:""},351:{msg:"output(opt, ...): string 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},352:{msg:"load(any, ...) 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},360:{msg:""},361:{msg:"acceptChanges() 은 추상메소드 입니다. [$1] 을 구현해야 합니다."},362:{msg:"rejectChanges() 은 추상메소드 입니다. [$1] 을 구현해야 합니다."}},L03:{100:{msg:""},110:{msg:""},111:{msg:"abstract, interface, enum 타입은 생성할 수 없습니다. $1['_KIND'] = '$2'"},112:{msg:"setObject(oGuid, origin); oGuid 는 'object' 타입입니다. typeof oGuid = '$1'"},113:{msg:"setObject(oGuid, origin); 네임스페이스가 서로 다릅니다. this._type = $1, oGuid._type = $2"},114:{msg:"setObject(oGuid, origin); origin 은 Guid 객체가 아닙니다. origin._type = '$1', origin._guid = '$2'"},120:{msg:""},121:{msg:"$name; val 은 'string' 타입입니다. typeof val = '$1'"},122:{msg:"$name; val.length 은 0 보다 커야 합니다."},200:{msg:""},210:{msg:""},211:{msg:"register(meta); 등록할 meta 가 Guid 객체가 아닙니다. meta._type = '$1', meta._guid = '$2'"},212:{msg:"register(meta); 등록할 meta._guid 가 이미 등록되어 있습니다. meta._guid = '$1'"},213:{msg:"release(meta); 해제할 meta 는 string(guid) | object(Guid) 타입만 가능합니다. typeof meta = '$1'"},220:{msg:""},221:{msg:"createMetaObject(oGuid, origin); oGuid 는 'object' 타입만 가능합니다. typeof oGuid = '$1'"},222:{msg:"createMetaObject(oGuid, origin); oGuid._type 은 'string' 타입만 가능합니다.(length > 0) typeof oGuid._type = '$1'"},223:{msg:"createMetaObject(oGuid, origin); origin 는 'object' 타입만 가능합니다. typeof origin = '$1'"},224:{msg:"createMetaObject(oGuid, origin); [$1] 네임스페이스가 'function' 타입이 아닙니다. typeof coClass = '$2'"},225:{msg:"createReferObject(meta); meta 는 'object' 타입만 가능합니다. typeof meta = '$1'"},226:{msg:"createReferObject(meta); meta._guid 은 'string' 타입만 가능합니다.(length > 0) typeof meta._guid = '$1'"},227:{msg:"createNsReferObject(fun); fun 는 'function' 타입이 아닙니다. typeof fun = '$1'"},230:{msg:""},231:{msg:"registerClass(fun, ns, key); fun 이 'function' 타입이 아닙니다. typeof fun = '$1'"},232:{msg:"registerClass(fun, ns, key); ns 가 'string' 타입이 아닙니다. typeof ns = '$1'"},233:{msg:"registerClass(fun, ns, key); key 가 'string' 타입이 아닙니다. typeof key = '$1'"},234:{msg:"releaseClass(fullName); fullName 은 'string' 타입만 가능합니다.(length > 0) typeof fullName = '$1'"},235:{msg:"findClass(fun); fun 는 'function' 타입이 아닙니다. typeof fun = '$1'"},236:{msg:"getClass(fullName); fullName 은 'string' 타입만 가능합니다.(length > 0) typeof fullName = '$1'"},240:{msg:""},241:{msg:"setMetaObject(oGuid, meta); oGuid 는 'object' 타입만 가능합니다. typeof oGuid = '$1'"},242:{msg:"setMetaObject(oGuid, meta); meta 는 'object' 타입만 가능합니다. typeof meta = '$1'"},243:{msg:"setMetaObject(meta); meta._guid 은 'string' 타입만 가능합니다.(length > 0) typeof meta._guid = '$1'"},244:{msg:"transformRefer(oGuid); oGuid 는 'object' 타입만 가능합니다. typeof oGuid = '$1'"},245:{msg:"transformRefer(oGuid); $1['$2']['$ns'] 는 'function' 타입이 아닙니다."},246:{msg:"loadMetaObject(str, parse?); str 은 'string' 타입만 가능합니다. typeof str = '$1'"},247:{msg:"loadMetaObject(str, parse?); str 을 파싱한 객체가 Guid 객체가 아닙니다. obj._type = '$1', obj._guid = '$2'"},250:{msg:""},251:{msg:"validObject(oGuid); oGuid 는 'object' 타입만 가능합니다. typeof oGuid = '$1'"},252:{msg:"hasGuidObject(oGuid, origin); guid 는 'string' 타입만 가능합니다.(length > 0) typeof guid = '$1'"},253:{msg:"hasGuidObject(oGuid, origin); origin[$1]는 'object' 타입이 아닙니다. typeof origin[$1] = '$2'"},254:{msg:"hasRefer(oGuid); oGuid 는 'object' 타입만 가능합니다. typeof oGuid = '$1'"},255:{msg:"hasRefer(oGuid); oGuid 가 Guid 객체가 아닙니다. oGuid._type = '$1', oGuid._guid = '$2'"},256:{msg:"findSetObject(oGuid, origin); [ oGuid._guid | oGuid ]는 'string' 타입만 가능합니다.(length > 0) guid = '$1'"},257:{msg:"findSetObject(oGuid, origin); origin 는 'object' 타입만 가능합니다. typeof origin = '$1'"},300:{msg:""},310:{msg:""},311:{msg:"NamespaceManager.isOverlap 은  'boolean' 타입만 가능합니다. typeof isOverlap = $1"},312:{msg:"_getArray(ns); ns 는 유효한 네임스페이스 이름 규칙이 아닙니다. ns = $1"},313:{msg:"_getArray(ns); ns 타입은 'string', 'array<string>' 타입만 가능합니다. typeof ns = $1"},314:{msg:"_getArray(ns); ns[$1] 는 'string' 타입이 아닙니다. typeof ns[$1] = $2"},315:{msg:"_getArray(ns); ns[$1] 는 유효한 이름 규칙이 아닙니다. ns[$1] = $1"},320:{msg:""},321:{msg:"addNamespace(ns); 네임스페이스 추가가 실패하였습니다."},322:{msg:"delNamespace(ns); 네임스페이스 삭제가 실패하였습니다."},323:{msg:"path(ns); 네임스페이스 경로 얻기에 실패하였습니다."},330:{msg:""},331:{msg:"add(fullName, elem); [$1] 는 유효한 이름 규칙이 아닙니다."},332:{msg:"add(fullName, elem); elem 이 이미 등록되었습니다. 중복허용 [this.isOverlap = 'true']"},333:{msg:"add(fullName, elem); 네임스페이스에 요소 등록이 실패하였습니다."},334:{msg:"del(fullName); 네임스페이스에 요소 삭제가 실패하였습니다."},340:{msg:""},341:{msg:"getPath(elem); elem 값이 없습니다. typeof elem = $1"},342:{msg:"output(stringify, space); 네임스페이스 내보내기가 실패하였습니다. $1"},343:{msg:"load(str, parse); str 는 'string' 타입이 아닙니다. typeof str = $1"},344:{msg:"load(str, parse); 네임스페이스 로딩이 실패하였습니다. $1"}},L04:{100:{msg:""},110:{msg:""},111:{msg:"_remove(idx): boolean 는 추상메소드 입니다. 구현해야 합니다."},112:{msg:"setObject(oGuid, origin); oGuid 의 _owner 연결이 실패하였습니다. guid = $1"},113:{msg:"removeAt(idx); idx 는 'number' 타입이 아닙니다. typeof idx = $1"},114:{msg:"add(any): number 는 추상메소드 입니다. 구현해야 합니다."},115:{msg:"clear() 는 추상메소드 입니다. 구현해야 합니다."},200:{msg:""},210:{msg:""},211:{msg:"setObject(oGuid, origin); oGuid['_elem'][$1] 의 _elements 연결이 실패하였습니다. guid = $2"},212:{msg:"insertAt(pos, value, desc); pos 는 'number' 타입이 아닙니다. typeof pos = $1"},213:{msg:"insertAt(pos, value, desc); pos 는 this.count 보다 클 수 없습니다. pos = $1, count = $2"},214:{msg:"insertAt(pos, value, desc);  pos 는 0 보다 작을 수 없습니다. pos = $1"},215:{msg:"insertAt(pos, value, desc); 등록이 실패하였습니다. pos = $1, value = $2"},220:{msg:""},221:{msg:"setObject(oGuid, origin); oGuid['_elem'].length = $1 길이와 oGuid['_key'].length = $2 길이가 서로 다릅니다."},222:{msg:"setObject(oGuid, origin); oGuid['_elem'].length = $1 길이와 oGuid['_desc'].length = $2 길이가 서로 다릅니다."},223:{msg:"setObject(oGuid, origin); oGuid._elem[$1] guid 를 찾을 수 없습니다. guid = $2"},224:{msg:"indexOf(obj, isKey); key로 인덱스값을 찾을 경우 obj 는 'string' 타입이어야 합니다. typeof obj = $1"},225:{msg:"add(name, value, desc); name 이 'string' 타입이 아닙니다. typeof name = $1"},226:{msg:"add(name, value, desc); name = '$1' 이 이름규칙에 맞지 않습니다. 규칙 = '$2'"},227:{msg:"add(name, value, desc); name = '$1' 이 예약어 입니다."},228:{msg:"add(name, value, desc); name = '$1' 이 기존 이름과 중복이 발생했습니다."},229:{msg:"add(name, value, desc); 추가가 실패하였습니다. name = '$1', value = '$2'"},"22A":{msg:"keyOf(idx); idx 이 'number' 타입이 아닙니다. typeof idx = $1"},"22B":{msg:"exist(key); key 이 'string' 타입이 아닙니다.(length > 0) typeof key = $1"},300:{msg:""},310:{msg:""},311:{msg:"$1.autoChanges 는 'boolean' 타입입니다. typeof aucoChanges = '$2'"},320:{msg:""},321:{msg:"collection 값이 [MetaObject] 을 상속한 인스턴스가 아닙니다."},322:{msg:"collection 이 [IArrayCollection] 을 구현한 인스턴스가 아닙니다."},323:{msg:"rollback(); '$1' 는 처리할 수 없는 cmd 입니다."}},L05:{100:{msg:""},110:{msg:""},111:{msg:"$1._entity 값이 [MetaElement] 인스턴스가 아닙니다."},112:{msg:"$1.columnName 는 'string' 타입입니다. typeof columnName = '$2'"},113:{msg:"기존에 $1.columnName '$2'이 존재합니다."},114:{msg:"기존에 $1.alias '$2'이 존재하여 columnName 을 설정할 수 없습니다."},115:{msg:"$1.alias 는 'string' 타입입니다. typeof alias = '$2'"},116:{msg:"기존에 $1.alias '$2'이 존재합니다."},117:{msg:"$1.caption 는 'string' 타입입니다. typeof caption = '$2'"},118:{msg:"setObject(oGuid, origin); oGuid.['_entity'] guid 를 찾을 수 없습니다. name = $1, guid = $2"},119:{msg:"clone() 은 추상메소드 입니다. 상속해서 구현해야 합니다."},120:{msg:""},121:{msg:"_load(prop); prop 는 'object' 타입입니다. typeof prop = '$2'"},122:{msg:"setObject(oGuid, origin); oGuid.['default'] guid 를 찾을 수 없습니다. guid = $1"},123:{msg:"setObject(oGuid, origin); oGuid.['value'] guid 를 찾을 수 없습니다. guid = $1"},130:{msg:""},131:{msg:"$1.isNotNull 는 'boolean' 타입입니다. typeof isNotNull = '$2'"},132:{msg:"$1.isNullPass 는 'boolean' 타입입니다. typeof isNullPass = '$2'"},133:{msg:"$1.constraints 의 배열 요소는 'function' | {regex: RegExp, msg: string} 타입입니다. typeof [$2].regex = '$3', [$2].msg = '$4'"},134:{msg:"$1.getter 는 'function' 타입입니다. typeof getter = '$2'"},135:{msg:"$1.setter 는 'function' 타입입니다. typeof setter = '$2'"},136:{msg:"addConstraint(regex, msg, code, condition); regex 는 RegExp 인스턴스가 아닙니다."},137:{msg:"addConstraint(regex, msg, code, condition); msg 는 'string' 타입입니다. typeof msg = '$1'"},140:{msg:""},141:{msg:"$1._baseType 는 'function' 타입입니다. typeof getter = '$2'"},142:{msg:"$1._baseType [BaseColumn]의 prototype 이 연결되어 있어야 합니다.(상속)"},143:{msg:"add(name, vlaue); _onwer 의 rows 가 존재하여 columnColleciton 을 추가할 수 없습니다. _onwer.rows.count = $1"},144:{msg:"add(name, vlaue); $1 에 '$2' 존재하여 추가할 수 없습니다."},145:{msg:"add(name, vlaue); $1 에 alias '$2'이 존재하여 추가할 수 없습니다."},146:{msg:"removeAt(idx); _onwer 의 rows 가 존재하여 columnColleciton 을 제거할 수 없습니다. _onwer.rows.count  = $1"},147:{msg:"addValue(name, value) 은 추상메소드 입니다. 구현해야 합니다."},150:{msg:""},151:{msg:"add(any); any 는 'string' | [BaseColumn] 타입입니다. typeof any = $1"},152:{msg:"addValue(name, value); name 은 'string' 타입입니다. typeof name = $1"},160:{msg:""},161:{msg:"add(any, refCol); refCol 값이 [BaseColumnCollection] 타입이 아닙니다."},162:{msg:"add(any, refCol); any 는 'string' | [BaseColumn] 타입입니다. typeof any = $1"},163:{msg:"addValue(name, value, refCol); name 은 'string' 타입입니다. typeof name = $1"},164:{msg:"addEntity(entity); entity 값이 [BaseEntity] 타입이 아닙니다."},200:{msg:""},210:{msg:""},211:{msg:"$1.constructor(entity) 값이 [BaseEntity] 타입이 아닙니다."},212:{msg:"setObject(oGuid, origin); oGuid['_elem'].length = $1 길이와 oGuid['_key'].length = $2 길이가 서로 다릅니다."},213:{msg:"setObject(oGuid, origin); oGuid['_elem'][$1] guid 를 찾을 수 없습니다. guid = $2"},220:{msg:""},221:{msg:"target의 _entity 객체와 $1._onwer 객체가 같이야 합니다."},222:{msg:"insertAt(pos, row, isCheck); row 는 [MetaRow] 타입이 아닙니다."},223:{msg:"insertAt(pos, row, isCheck); row 의 _entity 객체와 $1._onwer 객체가 같이야 합니다."},224:{msg:"insertAt(pos, row, isCheck); row[$1] 의 유효성 검사(valid)가 실패하였습니다. fail msg = '$2'"},300:{msg:""},310:{msg:""},311:{msg:"$1._mestaset 값은 [MetaSet] 타입이 아닙니다."},312:{msg:"$1.columns 속성을 재정의해야 합니다."},320:{msg:""},321:{msg:"_buildEntity(entity, cb, items); items[$1] 가 'string' 타입이 아닙니다. typeof items[$1] = $2"},322:{msg:"_buildEntity(entity, cb, items); this.columns 에 '$1' 컬럼명이 존재하여 추가할 수 없습니다."},323:{msg:"_buildEntity(entity, cb, items); entity 에 대한 row 생성이 실패하였습니다."},324:{msg:"_readEntity(entity, opt); entity 가 [BaseEntity] 타입이 아닙니다."},325:{msg:"_readEntity(entity, opt); opt 가 'number' 타입이 아닙니다. typeof opt = $1"},326:{msg:"_readEntity(entity, opt); entity 읽기가 실패하였습니다. opt = $1"},327:{msg:"_readEntity(entity, opt); this.rows 가 존재하여 컬럼을 load 할 수 없습니다. opt = $1"},328:{msg:"_readEntity(entity, opt); this.columns 에 '$1' 컬럼명이 존재하여 추가할 수 없습니다."},329:{msg:"_readSchema(obj, isRow, origin); obj._baseEntity guid를 찾을 수 없습니다. guid = $1"},"32A":{msg:"_readSchema(obj, isRow, origin); 스키마 읽기가 실패하였습니다."},"32B":{msg:"_readSchema(obj, isRow, origin); this.rows 가 존재하여 컬럼을 추가 할 수 없습니다."},"32C":{msg:"_readSchema(obj, isRow, origin); this.columns[$1] guid를 찾을 수 없습니다. guid = $2"},"32D":{msg:"_readSchema(obj, isRow, origin); this.columns[$1]._entity guid를 찾을 수 없습니다. guid = $2"},"32E":{msg:"_readSchema(obj, isRow, origin); this.columns 에 '$1' 컬럼명이 존재하여 추가할 수 없습니다."},330:{msg:""},331:{msg:"BaseEntity.transformSchema(oGuid); oGuid 는 스키마 객체가 아닙니다. oGuid = {columns: $1, rows: $2}"},332:{msg:"BaseEntity.transformSchema(oGuid); 스키마 변환이 실패하였습니다."},333:{msg:"setValue(row); row 가 [MetaRow] 타입이 아닙니다."},334:{msg:"setValue(row); columns 에 row 설정이 실패하였습니다."},335:{msg:"select(filter, ...); MetaRegistry.ns 에서 '$1' 가져오는데 싪패하였습니다."},336:{msg:"select(filter, ...); 조회가 실패하였습니다."},337:{msg:"clone() 은 추상메소드 입니다. 구현해야 합니다."},340:{msg:""},341:{msg:"merge(target, opt, isMath); target 이 [BaseEntity] 타입이 아닙니다."},342:{msg:"merge(target, opt, isMath); opt 이 'number' 타입이 아닙니다. typeof opt = $1"},343:{msg:"merge(target, opt, isMath); opt = 1, target.columns[$1].name = '$2' 이 column name 에 존재합니다."},344:{msg:"merge(target, opt, isMath); opt = 1, target.columns[$1].name = '$2' 이 column alias 에 존재합니다."},345:{msg:"merge(target, opt, isMath); opt = 3, target.columns[$1].name = '$2' 이 columns name 에 존재합니다."},346:{msg:"merge(target, opt, isMath); opt = 3, target.columns[$1].name = '$2' 이 columns alias 에 존재합니다."},347:{msg:"merge(target, opt, isMath); 병합이 실패하였습니다. opt = $1"},348:{msg:"copy() 은 추상메소드 입니다. 구현해야 합니다."},350:{msg:""},351:{msg:"load(obj, parse); [BaseEntity] 타입의 obj 는 로드할 수 없습니다."},352:{msg:"load(obj, parse); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},353:{msg:"load(obj, parse); 로드가 실패하였습니다."},354:{msg:"read(obj, opt); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},355:{msg:"read(obj, opt); opt 이 'number' 타입이 아닙니다. typeof opt = $1"},356:{msg:"read(obj, opt); opt 값은 범위(1 ~ 3)가 아닙니다. obj = $1"},357:{msg:"read(obj, opt); 읽기가 실패하였습니다."},358:{msg:"readSchema(obj, isCreate, origin); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},359:{msg:"readSchema(obj, isCreate, origin); obj 는 스키마 객체가 아닙니다. obj = {columns: $1, rows: $2}"},"35A":{msg:"readSchema(obj, isCreate, origin); 스카미 읽기가 실패하였습니다."},"35B":{msg:"readData(obj); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},"35C":{msg:"readData(obj); obj 는 스키마 객체가 아닙니다. obj = {columns: $1, rows: $2}"},"35D":{msg:"readData(obj); 데이터 읽기가 실패하였습니다."},360:{msg:""},361:{msg:""},400:{msg:""},410:{msg:""},411:{msg:"$1.tableName 값은 'string' 타입이 아닙니다. typeof tableName = $2"},412:{msg:"$1.columns 값은 [MetaTableColumnCollection] 타입이 아닙니다."},413:{msg:"$1.rows 존재하여 columns 을 설정할 수 없습니다. rows.count = $2"},414:{msg:"setObject(oGuid, origin); oGuid.['_metaSet'] guid 를 찾을 수 없습니다. guid = $1"},420:{msg:""},421:{msg:"$1._baseType 값은 function 타입이 아닙니다. typeof _baseType = $2"},422:{msg:"$1._baseType [MetaTable]의 prototype 이 연결되어 있어야 합니다.(상속)"},423:{msg:"add(any); any 는 'string' | [MetaTable] 타입만 가능합니다. typeof any = $1"},424:{msg:"add(any); tableName = '$1'이 기존에 존재합니다."},430:{msg:""},431:{msg:"$1.viewName 값은 'string' 타입이 아닙니다. typeof viewName = $2"},432:{msg:"$1.columns 값은 [MetaViewColumnCollection] 타입이 아닙니다."},433:{msg:"$1.rows 존재하여 columns 을 설정할 수 없습니다. rows.count = $2"},434:{msg:"$1._baseEntity 값은 [BaseEntity] 타입이 아닙니다."},435:{msg:"setObject(oGuid, origin); oGuid.['_metaSet'] guid 를 찾을 수 없습니다. guid = $1"},436:{msg:"setObject(oGuid, origin); oGuid.['_baseEntity'] guid 를 찾을 수 없습니다. guid = $1"},440:{msg:""},441:{msg:"$1._baseType 값은 'function' 타입이 아닙니다. typeof _baseType = $2"},442:{msg:"$1._baseType [MetaView]의 prototype 이 연결되어 있어야 합니다.(상속)"},443:{msg:"add(obj, baseEntity); [MetaView] 타입의 obj와  baseEntity 를 동시에 입력할 수 없습니다."},444:{msg:"add(obj, baseEntity); baseEntity 는 [BaseEntity] 타입이 아닙니다."},445:{msg:"add(obj, baseEntity); obj 는 'string' | [MetaView] 타입만 가능합니다. typeof obj = $1"},446:{msg:"add(obj, baseEntity); viewName = '$1'이 기존에 존재합니다."},450:{msg:""},451:{msg:"$1.setName 값은 'string' 타입이 아닙니다. typeof setName = $2"},452:{msg:"$1.autoChanges 값은 'boolean' 타입이 아닙니다. typeof setName = $2"},453:{msg:"MetaSet.transformSchema(oGuid); oGuid 는 스키마 객체가 아닙니다. oGuid = {tables: .., views: ..}"},454:{msg:"load(obj, parse); [MetaSet] 타입의 obj 는 로드할 수 없습니다."},455:{msg:"load(obj, parse); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},456:{msg:"read(obj, opt); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},457:{msg:"read(obj, opt); opt 이 'number' 타입이 아닙니다. typeof opt = $1"},458:{msg:"readSchema(obj, isCreate); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},459:{msg:"readSchema(obj, isCreate); obj 는 스키마 객체가 아닙니다. obj = {tables: $1, views: $2}"},"45A":{msg:"readData(obj); obj 가 'object' 타입이 아닙니다.(null제외) typeof obj = $1"},"45B":{msg:"readData(obj); obj 는 스키마 객체가 아닙니다. obj = {tables: $1, views: $2}"}}},W:{S01:{1:{msg:"[$1] 대상 [$2]는 삭제 할 수 없습니다.",long:'"configurable = true, writable = true" 로 설정하시면 이후 삭제 가능합니다. '}}},I:{S01:{1:{msg:"[$2] [$1]",long:""}}}}};function o(e){var r,o,i,s=n[t];if("string"==typeof e&&(r=e.substring(0,1),o=e.substring(1,4),i=e.substring(4,e.length),s[r]&&s[r]&&s[r][o]))return s[r][o][i]}return Object.defineProperty(e,"lang",{get:function(){return t},set:function(e){if(!n[e])throw new Error("The ["+e+"] language does not exist.");t=e},configurable:!1,enumerable:!1}),Object.defineProperty(e,"isLong",{get:function(){return r},set:function(e){r=e},configurable:!1,enumerable:!1}),e.init=function(){this.lang="eng",this.isLong=!1},e.get=function(e,t){return function(e,t){var n,i,s=o(e);return"object"!=typeof s?l(e)+"There are no messages about the code.":(n=a(s.msg),r&&(i=a(s.long)).length>0&&(n+="\n"+i),l(e)+n);function a(e){var r,n,o=e||"";if(""===o)return o;if(r=o.match(/\$\d+/g),!Array.isArray(r))return o;n=r.reduce((e,t,r)=>{var n=Number(t.replace("$",""));return e<n?n:e},0);for(var i=1;i<=n;i++){var s=t[i-1];o=o.replace(new RegExp("\\$"+i,"g"),s)}return o}function l(e){var t="";return"string"==typeof e&&e.length>0&&(e.substring(0,1),t="["+e+"] "),t}}(e,t)},e.getObject=function(e){return o(e)},e.error=function(t,r){throw new Error(e.get(t,r))},e.warn=function(t,r){console.warn(e.get(t,r))},e}();t?exports.Message=r:(e._L.Message=r,e._L.Common.Message=r)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Common=e._L.Common||{},t)var r=require("./message").Message;else var n=e._L.Message;var o=r||n,i=!!e.OLD_ENV&&e.OLD_ENV,s=function(){function e(t,r,n){var s,a,l,c="";r instanceof e?(a=r.queue,s=r.prop):"object"==typeof r&&null!==r&&(s=r),c=(l="string"==typeof t?t:t instanceof RegExp?o.get(t.source,n):"")+"\n",s&&(c+=function(e){var t="";for(var r in e)"string"==typeof e[r]&&(t+=r+" : "+e[r]+"\n");return t}(s)),a&&(c+=function(e){for(var t="",r=e.length,n=r;n>0;n--){for(var o="",i=n;i<=r;i++)o+="#";t+=o+" "+e[n-1]+"\n"}return t}(a));var u=new Error(c);return u.queue=a||[],u.prop=s||{},u.queue.push(l),Error.captureStackTrace&&!i&&Error.captureStackTrace(u,e),Object.setPrototypeOf(u,Object.getPrototypeOf(this)),u}return e._NS="Common",e.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),e.prototype.toString=function(){return"ExtendError : "+this.message},e}();t?exports.ExtendError=s:(e._L.ExtendError=s,e._L.Common.ExtendError=s)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Common=e._L.Common||{},e._L.Common.Type=e._L.Common.Type||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=!!e.OLD_ENV&&e.OLD_ENV;function l(e){return"object"==typeof e&&null!==e&&!function(e){return"object"==typeof e&&null!==e&&(e instanceof RegExp||e instanceof Date)}(e)}function c(e){return"number"==typeof e||("string"==typeof e||("boolean"==typeof e||("bigint"==typeof e||(e instanceof RegExp||void 0))))}function u(e,t){return e===t||e instanceof RegExp&&t instanceof RegExp&&e.source===t.source}var f=function(e){return new e};function p(e){return e.name}function h(e){var t;if("string"==typeof e)return null!==(t=/^_[a-zA-Z]+_/.exec(e))?t[0].toUpperCase():void 0}function g(e){var t=[];return"string"==typeof e&&(t=(t=(t=t.concat(["_ALL_","_ANY_","_NON_","_ERR_"])).concat(["_REQ_","_OPT_","_DEF_","_EUM_"])).concat(["_ETC_"])).indexOf(e)>-1}function y(e){var t=[];return"string"==typeof e&&(t=(t=(t=t.concat(["_ALL_","_ANY_"])).concat(["_REQ_","_OPT_","_SEQ_"])).concat(["_ETC_"])).indexOf(e)>-1}var d=function(e,t){var r=[],n=e,o=t||!1;do{for(var i=Object.getOwnPropertyNames(n),s=0;s<i.length;s++){var a=i[s];-1!==r.indexOf(a)||!o&&Object.prototype.hasOwnProperty(a)||r.push(a)}}while(n=Object.getPrototypeOf(n));return r},m=function(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(("string"==typeof(r=e)||"number"==typeof r||"boolean"==typeof r||void 0===r||"bigint"==typeof r)&&e!==t)return!1;var r,n,o;if("function"==typeof e&&((n=e)!==(o=t)&&n.toString()!==o.toString()))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++){var s=e[i],a=t[i];if(!m(s,a))return!1}}else{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){s=e[l],a=t[l];if(!m(s,a))return!1}}return!0},w=function(e,t){var r,n,o=[],i=[];if(t=!1!==t,"function"!=typeof e)throw new s(/EL0130C/,null,[typeof e]);if(o.push(e),(n=function(e){return Object.prototype.hasOwnProperty.call(e,"super")?e.super:a||"function"!=typeof Object.getPrototypeOf?e.__proto__:Object.getPrototypeOf(e)}(e))!==Function.prototype&&(o=o.concat(w(n,t))),t){r=e._UNION||[];for(var l=0;l<r.length;l++)o=o.concat(w(r[l],t))}for(l=0;l<o.length;l++){i.indexOf(o[l])<0&&i.push(o[l])}return i},_=function(e,t){var r;if("function"!=typeof e)return!1;if("function"!=typeof t&&"string"!=typeof t)return!1;r=w(e,!1);for(var n=0;n<r.length;n++)if("string"==typeof t){if(t===r[n].name)return!0}else if(t===r[n])return!0;return!1},b=function(e,t){var r;if("function"!=typeof e)return!1;if("function"!=typeof t&&"string"!=typeof t)return!1;r=w(e);for(var n=0;n<r.length;n++)if("string"==typeof t){if(t===r[n].name)return!0}else if(t===r[n])return!0;return!1},E=function(e){var t={},r=l(e)&&e.$type?e:$(e);if(t.$type=r.$type,null!==r.default&&void 0!==r.default&&(t.default=r.default),null!==r.kind&&void 0!==r.kind&&(t.kind=r.kind),r.params&&(t.params=r.params),r.return&&(t.return=r.return),r.creator&&(t.creator=r.creator),r._instance&&(t._instance=r._instance),["null","undefined","number","string","boolean","symbol","bigi¡nt","object","regexp"].indexOf(t.$type)>-1)return r.default&&(t.default=r.default),t;if("array"===t.$type||"choice"===t.$type){t.list=[];for(var n=0;n<r.list.length;n++)t.list[n]=E(r.list[n])}if("function"===t.$type){for(n=0;n<t.params.length;n++)t.params[n]=E(r.params[n]);r.return&&(t.return=E(r.return))}if("class"===t.$type&&"function"==typeof r.ref){t.creator=r.ref.name;var o=f(r.ref);t._instance=E(o)}if("union"===t.$type){t._prop={};o=r.ref||r._prop;var i=d(o);for(n=0;n<i.length;n++){var s=i[n];"_interface"!==s&&"isImplementOf"!==s&&(t._prop[s]=E(o[s]))}}return t},v=function(e){return $(e).$type},$=function(e){var t,r,n,o,i={$type:"",ref:void 0,toString:function(){var e="",t=[];if("array"===this.$type||"choice"===this.$type){for(var r=0;r<this.list.length;r++){var n,o=$(this.list[r]);if(o.default&&null!==o.default)n="string"===o.$type?"'"+o.default+"'":o.default,t.push(o.$type+"("+n+")");else t.push(o.$type)}e="_OPT_"===this.kind||"_REQ_"===this.kind||"_SEQ_"===this.kind||"_EUM_"===this.kind||"_DEF_"===this.kind?this.$type+"("+this.kind+")["+t.join(", ")+"]":this.$type+"("+this.kind+")"}else e=this.$type,this.default&&null!==this.default&&("string"===this.$type?e+="('"+this.default+"')":e+="("+this.default+")");return e}};if("object"==typeof e&&null!==e&&e.$type){if(i.$type=e.$type,e.default&&(i.default=e.default),e.kind&&(i.kind=e.kind),e.ref&&(i.ref=e.ref),e.list&&(i.list=e.list),e.name&&(i.name=e.name),e.func&&(i.func=e.func),e.params&&(i.params=e.params),e.return&&(i.return=e.return),t=i.$type,r=[],!("string"==typeof t&&(r=(r=(r=(r=(r=r.concat(["null","undefined","number","string","boolean"])).concat(["array","function","object"])).concat(["choice","union","class"])).concat(["symbol","bigint","regexp"])).concat(["etc"])).indexOf(t)>-1))throw new s(/EL01304/,null,[i.$type]);if("array"===i.$type&&(i.kind=i.kind||"_ALL_",!y(i.kind)))throw new s(/EL01305/,null,[i.kind]);if("choice"===i.$type&&!g(i.kind))throw new s(/EL01306/,null,[i.kind]);return i}if(i.ref=e,null===e)i.$type="null";else if(e===Number)i.$type="number",i.default=null;else if(e===String)i.$type="string",i.default=null;else if(e===Boolean)i.$type="boolean",i.default=null;else if(e===Array)i.$type="array",i.kind="_ALL_",i.list=[];else if(e===Function)i.$type="function",i.params=[];else if(e===Object)i.$type="object";else if(e===RegExp)i.$type="regexp",i.default=null;else if(e===Symbol)i.$type="symbol";else if(e===BigInt)i.$type="bigint",i.default=null;else if(e instanceof RegExp)i.$type="regexp",i.default=e;else if(void 0===e)i.$type="undefined";else if("number"==typeof e)i.$type="number",i.default=e;else if("string"==typeof e)i.$type="string",i.default=e;else if("boolean"==typeof e)i.$type="boolean",i.default=e;else if("bigint"==typeof e)i.$type="bigint",i.default=e;else if("symbol"==typeof e)i.$type="symbol";else if("function"==typeof e){var a=e._KIND;if(a?(a=a.toLowerCase(),i.$type="function"===a?"function":"class"):i.$type=(n=e.name,""!==(o=n.charAt(0))&&o===o.toUpperCase()?"class":"function"),"function"===i.$type)try{var c=e._TYPE?e._TYPE:function(e){var t,r,n={params:[],return:void 0},o=[];e=e.replace(/\/\*[^](.*?)\*\//g,"").replace(/\/\/[^](.*?)(\n|$)/g,"");try{if(/\([,_\[\]{:}\w\s]*\)\s*(?:=>)?\s*{\s*.*\s*.*\s*}/.test(e))t=/(?:function\s)?\(([\[\]{:}\s\w,]*)\)\s*(?:=>)?\s*{(?:\s*return\s+|\s*)?([\[\]{:}\s\w,]*);?\s*}/.exec(e);else{if(!/(\(.*\)|\w+)\s*(?:=>).*/.test(e))throw new s(/EL01301/,null,[e]);t=/\(?([\[\]{:}\s\w,]*)\)?\s*(?:=>)\s*{?(?:\s*return\s+|\s*)?([\[\]\s\w,]*);?\s*}?/.exec(e)}if(null===t)throw new s(/EL01302/,null,[e]);o=new Function("return ["+t[1]+"]")(),n.params=o,""!==t[2]&&(r=new Function("return "+t[2])()),n.return=r}catch(e){throw new s(/EL01303/,e,[""])}return n}(e.toString());i.params=c.params,i.return=c.return}catch(e){i.params=[]}}else if(Array.isArray(e)){if(1===e.length&&Array.isArray(e[0])?(i.$type="choice",0===e[0].length?i.kind="_ANY_":i.kind=h(e[0][0]),i.list=i.kind?e[0].slice(1):e[0]):(i.$type="array",0===e.length?i.kind="_ANY_":i.kind=h(e[0]),i.list=i.kind?e.slice(1):e),i.kind||(i.kind="_OPT_"),"array"===i.$type&&!y(i.kind))throw new s(/EL01307/,null,[i.kind]);if("choice"===i.$type&&!g(i.kind))throw new s(/EL01308/,null,[i.kind])}else(function(e){return!!(l(e)&&d(e).length>0)})(e)||function(e){return!(!l(e)||0!==Object.keys(e).length||0!==d(e).length)}(e)?i.$type="union":i.$type="object";return i},L=function(e,t,r,n){var o,i=$(e),a=$(t),l={},f=i.toString(),p=a.toString();if("extType"===(n=n||"extType")&&n||(l["error path"]=n),r=r||0,i.kind&&("_SEQ_"===i.kind||"_OPT_"===i.kind||"_REQ_"===i.kind||"_EUM_"===i.kind||"_DEF_"===i.kind)&&0===i.list.length)throw new s(/EL01201/,l,["extType",f]);if(a.kind&&("_SEQ_"===a.kind||"_OPT_"===a.kind||"_REQ_"===a.kind||"_EUM_"===a.kind||"_DEF_"===a.kind)&&0===a.list.length)throw new s(/EL01201/,l,["tarType",p]);if("choice"===i.$type||"choice"!==a.$type)if(o=i.$type,[].concat(["null","undefined","number","string","boolean"]).concat(["symbol","bigint","regexp","object"]).indexOf(o)>-1){if(void 0!==i.default&&null!==i.default&&!u(i.default,a.default))throw new s(/EL01202/,l,[i.$type,i,a]);if(i.$type!==a.$type)throw new s(/EL01203/,l,[i.$type,a.$type])}else if("array"===i.$type)!function(){if("array"!==a.$type||!Array.isArray(a.list))throw new s(/EL01211/,l,[a.$type]);if("_ALL_"===i.kind)return;if("_ANY_"===i.kind){if("_ANY_"===a.kind)return;if("_ALL_"===a.kind||"_OPT_"===a.kind)throw new s(/EL01212/,l,[p]);return}if("_SEQ_"===i.kind){if(i.kind!==a.kind)throw new s(/EL01213/,l,[a]);if(i.list.length>a.list.length)throw new s(/EL01214/,l,[i.list.length,a.list.length]);for(var e=0;e<i.list.length;e++)try{L(i.list[e],a.list[e],r,n)}catch(t){throw new s(/EL01215/,t,[e])}return}if("_REQ_"==i.kind){if("_ALL_"===a.kind||"_ANY_"===a.kind||"_OPT_"===a.kind)throw new s(/EL01216/,l,[i.$type,p])}else{if("_OPT_"!==i.kind)throw new s(/EL01218/,l,[i.kind]);if("_ALL_"===a.kind||"_ANY_"===a.kind)throw new s(/EL01217/,l,[i.$type,p])}for(var e=0;e<a.list.length;e++){for(var t=!1,o=0;o<i.list.length;o++)try{if(t)break;if("choice"===$(a.list[e]).$type&&"choice"!==$(i.list[o]).$type){var c={$type:"choice",kind:"_OPT_",list:i.list};L(c,a.list[e],r,n)}else L(i.list[o],a.list[e],r,n);t=!0}catch(e){continue}if(!t)throw new s(/EL01219/,l,[i,a])}}();else if("choice"===i.$type)!function(){if("_ALL_"===i.kind){if(a.$type==a.$type&&"_ERR_"===a.kind)throw new s(/EL01221/,l,[i.$type,p]);return}if("_ANY_"===i.kind){if("undefined"===a.$type)throw new s(/EL01222/,l,["_ANY_","undefined"]);if(i.$type===a.$type&&("_ALL_"===a.kind||"_OPT_"===a.kind||"_ERR_"===a.kind||"_NON_"===a.kind))throw new s(/EL01223/,l,[p]);return}if("_NON_"===i.kind){if(i.$type!==a.$type||i.kind!==a.kind)throw new s(/EL01224/,l,[p]);return}if("_ERR_"===i.kind){if(i.$type!==a.$type||i.kind!==a.kind)throw new s(/EL01225/,l,[p]);return}if("_REQ_"===i.kind){if(i.$type===a.$type&&("_ALL_"===a.kind||"_ANY_"===a.kind||"_OPT_"===a.kind||"_NON_"===a.kind||"_ERR_"===a.kind))throw new s(/EL01226/,l,[p])}else if("_OPT_"===i.kind){if("undefined"===a.$type)return;if(i.$type===a.$type&&("_ALL_"===a.kind||"_ANY_"===a.kind||"_NON_"===a.kind||"_ERR_"===a.kind))throw new s(/EL01227/,l,[p])}else if("_EUM_"===i.kind){if(i.$type!==a.$type||i.kind!==a.kind)throw new s(/EL01228/,l,[]);for(var e=0;e<i.list.length;e++)if(!c(i.list[e]))throw new s(/EL01229/,l,[e,$(i.list[e])]);for(var e=0;e<a.list.length;e++)if(!c(a.list[e]))throw new s(/EL0122A/,l,[e,$(a.list[e])])}else{if("_DEF_"!==i.kind)throw new s(/EL0122E/,l,[i.kind]);if(i.$type!==a.$type||i.kind!==a.kind)throw new s(/EL0122B/,l,[]);if(!c(i.list[0]))throw new s(/EL0122C/,l,[$(i.list[0])]);if(!c(a.list[0]))throw new s(/EL0122D/,l,[$(a.list[0])])}for(var o=a.kind?a.list:[t],u=0;u<o.length;u++){for(var f=!1,e=0;e<i.list.length;e++)try{if(f)continue;L(i.list[e],o[u],r,n),f=!0}catch(e){continue}if(!f)throw new s(/EL0122F/,l,[u,i,$(o[u]).$type])}}();else if("class"===i.$type)!function(){if("class"===a.$type){if(_(a.ref,i.ref))return;if(1===r)try{var e=new i.ref,t=new a.ref;return L(e,t,r,n)}catch(e){throw new s(/EL01231/,e,[])}throw new s(/EL01232/,l,[r])}if("union"===a.$type){if(1===r)try{var e=new i.ref;return L(e,a.ref,r,n)}catch(e){throw new s(/EL01233/,e,[])}throw new s(/EL01234/,l,[r])}throw new s(/EL01235/,l,[a])}();else if("union"===i.$type)!function(){var t;if("union"!==a.$type)throw new s(/EL01241/,l,[a]);t=d(i.ref);for(var o=0;o<t.length;o++){var c=t[o];if(!(c in a.ref))throw new s(/EL01242/,l,[c,v(e[c])]);try{L(i.ref[c],a.ref[c],r,n)}catch(e){throw new s(/EL01243/,e,[c])}}}();else{if("function"!==i.$type)throw new s(/EL01204/,l,[]);!function(){if("function"!==a.$type)throw new s(/EL01251/,l,[a]);if(i.ref===Function)return;if(i.name){if(i.name===t.name||i.name===a.name||a.func&&i.name===a.func.name)return;throw new s(/EL01252/,l,[i.name,a.name])}if(i.func){if("function"!=typeof a.func)throw new s(/EL01253/,l,[]);if(_(a.func,i.func))return;throw new s(/EL01254/,l,[])}if(!(i.return||i.params&&0!==i.params.length))return;if(void 0===a.params&&void 0===a.return)throw new s(/EL01255/,l,[$(i.params),v(i.return)]);if(Array.isArray(i.params)&&i.params.length>0)try{L(["_SEQ_"].concat(i.params),["_SEQ_"].concat(a.params),r,n)}catch(e){throw new s(/EL01256/,e,[])}if(i.return)try{L(i.return,a.return,r,n)}catch(e){throw new s(/EL01257/,e,[])}}()}else L({$type:"choice",kind:"_REQ_",list:[e]},t,r,n)},O=function(e,t,r,n){var o=$(e),i=$(t),a={},l=o.toString(),h=i.toString();if("extType"!==(n=n||"extType")&&(a["error path"]=n),r=r||0,o.kind&&!("_SEQ_"!==o.kind&&"_OPT_"!==o.kind&&"_REQ_"!==o.kind&&"_EUM_"!==o.kind&&"_DEF_"!==o.kind||void 0!==o.ref&&0!==o.list.length))throw new s(/EL01101/,a,["extType",l]);if("null"===o.$type){if(null!==t)throw new s(/EL01102/,a,["null",h])}else if("undefined"===o.$type){if(void 0!==t)throw new s(/EL01102/,a,["undefined",h])}else if("string"===o.$type){if("string"==typeof o.default&&void 0===t&&(t=o.default),"string"!=typeof t)throw new s(/EL01102/,a,["string",h])}else if("number"===o.$type){if("number"==typeof o.default&&void 0===t&&(t=o.default),"number"!=typeof t)throw new s(/EL01102/,a,["number",h])}else if("boolean"===o.$type){if("boolean"==typeof o.default&&void 0===t&&(t=o.default),"boolean"!=typeof t)throw new s(/EL01102/,a,["boolean",h])}else if("bigint"===o.$type){if("bigint"==typeof o.default&&void 0===t&&(t=o.default),"bigint"!=typeof t)throw new s(/EL01102/,a,["bigint",h])}else if("symbol"===o.$type){if("symbol"!=typeof t)throw new s(/EL01102/,a,["symbol",h])}else if("regexp"===o.$type){if(o.default&&null!==o.default&&void 0===t&&(t=o.default),!(t instanceof RegExp))throw new s(/EL01102/,a,["regexp",h])}else if("object"===o.$type){if("object"!==i.$type)throw new s(/EL01102/,a,["object",h])}else if("array"===o.$type)!function(){if(!Array.isArray(t))throw new s(/EL01111/,a,[h]);if("_ALL_"===o.kind)return;if("_ANY_"===o.kind){if(0===t.length)throw new s(/EL01112/,a,[t.length]);return}if("_SEQ_"===o.kind){if(o.list.length>t.length)throw new s(/EL01113/,a,[o.list.length,i.list.length]);for(var e=0;e<o.list.length;e++){var l=o.list[e],f=i.list[e];if(c(l)){if(!u(l,f))throw new s(/EL01114/,a,[e,l,f])}else try{O(l,f,r,n)}catch(t){throw new s(/EL01115/,t,[e,v(l)])}}return}if("_REQ_"===o.kind){if(0===t.length)throw new s(/EL01116/,a,[t.length])}else{if("_OPT_"!==o.kind)throw new s(/EL01117/,a,[o.kind]);if(Array.isArray(t)&&0===t.length)return}for(var e=0;e<t.length;e++){for(var p=t[e],g=!1,y=0;y<o.list.length;y++)try{var d=o.list[y];if(!c(d)){O(d,p,r,n),g=!0;break}if(u(d,p)){g=!0;break}}catch(e){continue}if(!g)throw new s(/EL01118/,a,[o.toString(),i.toString()])}}();else if("choice"===o.$type)!function(){if("_ALL_"===o.kind)return;if("_ANY_"===o.kind){if(void 0!==t)return;throw new s(/EL01121/,a,[])}if("_NON_"===o.kind){if(void 0===t)return;throw new s(/EL01122/,[])}if("_ERR_"===o.kind){if(t instanceof Error)return;throw new s(/EL01123/,[])}if("_REQ_"===o.kind);else if("_OPT_"===o.kind){if(void 0===t)return}else if("_EUM_"===o.kind){for(var e=0;e<o.list.length;e++)if(!c(o.list[e]))throw new s(/EL01124/,a,[e,v(o.list[e])])}else{if("_DEF_"!==o.kind)throw new s(/EL01126/,a,[o.kind]);if(!c(o.list[0]))throw new s(/EL01125/,a,[v(o.list[0])]);if(void 0===t)return void(t=o.list[0])}for(var e=0;e<o.list.length;e++)try{var l=o.list[e];if(!c(l))return O(l,t,r,n);if(u(l,t))return}catch(e){continue}throw new s(/EL01127/,a,[o,i])}();else if("class"===o.$type)!function(){if("class"===i.$type){if(void 0===o.ref)return;if(_(i.ref,o.ref))return}else if("object"==typeof t){if(t instanceof e)return;if(("function"!=typeof(c=e)||c!==Number&&c!==String&&c!==Boolean&&c!==Object&&c!==Array&&c!==Function&&c!==RegExp&&c!==Date&&c!==Symbol&&c!==BigInt)&&null!==t&&1===r)try{var l="extType"===n?"<instance>":n+"<instance>";return O(f(e),t,r,l)}catch(e){throw new s(/EL01131/,e)}throw new s(/EL01132/,a,[p(e)])}var c;throw new s(/EL01133/,a,[i])}();else if("union"===o.$type)!function(){var l;if("union"!==i.$type)throw new s(/EL01141/,a,[i]);l=d(o.ref);for(var c=0;c<l.length;c++){var u=l[c],f=$(e[u]);if("_interface"!==u&&"isImplementOf"!==u){void 0!==f.default&&null!==f.default&&void 0===t[u]&&(t[u]=f.default);try{var p=n+"['"+u+"']";O(e[u],t[u],r,p)}catch(e){throw new s(/EL01143/,e,[u])}}}}();else{if("function"!==o.$type)throw new s(/EL01103/,a,[]);!function(){if("function"!==i.$type)throw new s(/EL01151/,a,[i]);if(o.ref===Function)return;if(o.name){if(o.name===t.name||o.name===i.name||i.func&&o.name===i.func.name)return;throw new s(/EL01152/,a,[o.name,t.name])}if(o.func){if("function"!=typeof i.func)throw new s(/EL01153/,a,[]);if(_(i.func,o.func))return;throw new s(/EL01154/,a,[])}if(!(o.return||o.params&&0!==o.params.length))return;if(void 0===i.params&&void 0===i.return)throw new s(/EL01155/,a,[$(o.params),v(o.return)]);if(Array.isArray(o.params)&&o.params.length>0)try{L(["_SEQ_"].concat(o.params),["_SEQ_"].concat(i.params),r,n)}catch(e){throw new s(/EL01156/,e,[])}if(o.return)try{L(o.return,i.return,r,n)}catch(e){throw new s(/EL01157/,a,[])}}()}},j=function(e,t,r){try{L(e,t,r)}catch(e){throw new s(/EL0130A/,e)}},S=function(e,t,r){try{O(e,t,r)}catch(e){throw new s(/EL0130B/,e)}},M=function(e,t,r){try{L(e,t,r)}catch(e){return!1}return!0},x=function(e,t,r){try{return O(e,t,r),!0}catch(e){return!1}};if(t)exports.getAllProperties=d,exports.deepEqual=m,exports.isProtoChain=_,exports.hasType=b,exports.getTypes=w,exports.extendType=$,exports.typeObject=E,exports.typeOf=v,exports.matchType=S,exports.allowType=j,exports.isMatchType=x,exports.isAllowType=M;else{var C={getAllProperties:d,deepEqual:m,isProtoChain:_,hasType:b,getTypes:w,extendType:$,typeObject:E,typeOf:v,matchType:S,allowType:j,isMatchType:x,isAllowType:M};e._L.Type=C,e._L.Common.Type=C}}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Common=e._L.Common||{},e._L.Common.Util=e._L.Common.Util||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./type");else var i=e._L.Message,s=e._L.ExtendError,a=e._L.Type;var l=r||i,c=n||s,u=o||a;if(void 0===c)throw new Error(l.get("ES011",["ExtendError","extend-error"]));if(void 0===u)throw new Error(l.get("ES011",["Type","type"]));var f=!!e.OLD_ENV&&e.OLD_ENV;function p(e){return null!=e&&"object"==typeof e}Array.isArray&&!f||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var h=function(e,t){var r=0;return t=t||0,e instanceof Array&&10>t&&(r++,t++,r+=h(e[0],t)),r},g=function(){function e(e){var t=(Math.random().toString(16)+"000000000").substring(2,10);return e?"-"+t.substring(0,4)+"-"+t.substring(4,8):t}return e()+e(!0)+e(!0)+e()},y=function(e){var t;if(!p(e))return e;if(e instanceof RegExp)return e;if(t=Array.isArray(e)?[]:{},Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=y(e[r]);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=y(e[n]));return t},d="function"!=typeof Object.create||f?function(e,t){if(t){e.super=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}:function(e,t){t&&(e.super=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0,enumerable:!1}}))},m=function(e,t,r){var n=[],o=0;if("function"!=typeof e)throw new c(/EL01401/,null,[typeof e]);if(!p(t))throw new c(/EL01402/,null,[typeof t]);void 0===t._interface&&Object.defineProperty(t,"_interface",{get:function(){return n},configurable:!1,enumerable:!1}),e._UNION||(e._UNION=[]);for(var i=2;i<arguments.length;i++){if("function"!=typeof arguments[i])throw new c(/EL01403/,null,[i-2,typeof arguments[i]]);t._interface.indexOf(arguments[i])<0&&(t._interface.push(arguments[i]),o++)}for(i=0;i<e._UNION.length;i++)t._interface.indexOf(e._UNION[i])<0&&(t._interface.push(e._UNION[i]),o++);try{for(i=t._interface.length-o;i<t._interface.length;i++)"interface"===e._KIND?u.allowType(t._interface[i],t,1):u.matchType(t._interface[i],t,1)}catch(r){throw new c(/EL01404/,r,[s(t),s(t._interface[i]),e._KIND||"class"])}function s(e){return"function"==typeof e?e.name:"object"==typeof e?(!f&&Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor.name:"unknown name"}void 0===t.isImplementOf&&Object.defineProperty(t,"isImplementOf",{value:function(e){if("function"==typeof e){for(var t=0;t<this._interface.length;t++)if(this._interface[t]===e)return!0}else{if("string"!=typeof e)throw new c(/EL01405/,null,[typeof e]);for(var t=0;t<this._interface.length;t++)if(this._interface[t].name===e)return!0}return!1},configurable:!1,enumerable:!1})};if(t)exports.inherits=d,exports.getArrayDepth=h,exports.createGuid=g,exports.implements=m,exports.deepCopy=y;else{var w={inherits:d,getArrayDepth:h,createGuid:g,implements:m,deepCopy:y};e._L.Util=w,e._L.Common.Util=w}}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Common=e._L.Common||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./util");else var i=e._L.Message,s=e._L.ExtendError,a=e._L.Util;var l=r||i,c=n||s,u=o||a;if(void 0===c)throw new Error(l.get("ES011",["ExtendError","extend-error"]));if(void 0===u)throw new Error(l.get("ES011",["Util","util"]));var f=function(){function e(e){if("object"!=typeof e)throw new c(/EL01511/,null,[typeof e]);var t=this._getInitObject(),r=!1,n=!1;Object.defineProperty(this,"$subscribers",{get:function(){return t},set:function(e){if("object"!=typeof e)throw new c(/EL01514/,null,[typeof val]);if(void 0===e.any)throw new c(/EL01515/,null,[]);t=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_caller",{value:e,writable:!1}),Object.defineProperty(this,"_list",{get:function(){var e=[];for(var t in this.$subscribers)for(var r=this.$subscribers[t],n=0;n<r.length;n++){var o={};o[t]={},o[t][n]=r[n],e.push(o)}return e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"isLog",{get:function(){return r},set:function(e){if("boolean"!=typeof e)throw new c(/EL01512/,null,[typeof e]);r=e}}),Object.defineProperty(this,"isSingleMode",{get:function(){return n},set:function(e){if("boolean"!=typeof e)throw new c(/EL01513/,null,[typeof e]);n=e}})}return e._NS="Common",e._PARAMS=["_caller"],e.prototype._getInitObject=function(){return{any:[]}},e.prototype.init=function(){var e=this._getInitObject();this.$subscribers=e},e.prototype.subscribe=function(e,t){if(t=t||"any","function"!=typeof e)throw new c(/EL01516/,null,[typeof e]);this.isSingleMode&&this.$subscribers[t]&&this.unsubscribe(t),void 0===this.$subscribers[t]&&(this.$subscribers[t]=[]),this.$subscribers[t].push(e)},e.prototype.unsubscribe=function(e,t){if(void 0!==e){if(this.$subscribers[e])if("function"==typeof t)for(var r=0;r<this.$subscribers[e].length;r++)this.$subscribers[e][r]===t&&this.$subscribers[e].splice(r,1);else delete this.$subscribers[e]}else this.init()},e.prototype.publish=function(e){e=e||"any";var t=Array.prototype.slice.call(arguments),r=t.length>=1?t.splice(1):[];if(e in this.$subscribers)for(var n=0;n<this.$subscribers[e].length;n++)"function"==typeof this.$subscribers[e][n]&&this.$subscribers[e][n].apply(this._caller,r);this.isLog&&console.log("publish() 이벤트 발생 ["+this._caller.constructor.name+"] type:"+e)},e}();t?(exports.Observer=f,e._L.Observer=f,e.Observer=f):(e._L.Observer=f,e._L.Common.Observer=f)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.getTypes=function(){throw new s(/EL02111/,null,["IObject"])},e.prototype.instanceOf=function(){throw new s(/EL02112/,null,["IObject"])},e.prototype.equal=function(){throw new s(/EL02113/,null,["IObject"])},e}();t?exports.IObject=a:(e._L.IObject=a,e._L.Interface.IObject=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){this._guid=String,this._type=[["_req_",Function,{$type:"class"}]]}return e._NS="Interface",e._KIND="interface",e.prototype.getObject=function(){throw new s(/EL02121/,null,["IMarshal"])},e.prototype.setObject=function(){throw new s(/EL02122/,null,["IMarshal"])},e}();t?exports.IMarshal=a:(e._L.IMarshal=a,e._L.Interface.IMarshal=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./util");else var i=e._L.Message,s=e._L.ExtendError,a=e._L.Util;var l=r||i,c=n||s,u=o||a;if(void 0===c)throw new Error(l.get("ES011",["ExtendError","extend-error"]));if(void 0===u)throw new Error(l.get("ES011",["Util","util"]));var f=function(){function e(){}return e._KIND="interface",e._NS="Interface",e.prototype.add=function(){throw new c(/EL02211/,null,["ICollection"])},e.prototype.remove=function(){throw new c(/EL02212/,null,["ICollection"])},e.prototype.contains=function(){throw new c(/EL02213/,null,["ICollection"])},e.prototype.indexOf=function(){throw new c(/EL02214/,null,["ICollection"])},e}();t?exports.ICollection=f:(e._L.ICollection=f,e._L.Interface.ICollection=f)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./util"),i=require("./i-collection").ICollection;else var s=e._L.Message,a=e._L.ExtendError,l=e._L.Util,c=e._L.ICollection;var u=r||s,f=n||a,p=o||l,h=i||c;if(void 0===f)throw new Error(u.get("ES011",["ExtendError","extend-error"]));if(void 0===p)throw new Error(u.get("ES011",["Util","util"]));if(void 0===h)throw new Error(u.get("ES011",["ICollection","i-collection"]));var g=function(e){function t(){e.call(this)}return p.inherits(t,e),t._KIND="interface",t._NS="Interface",t.prototype.keyOf=function(){throw new f(/EL02231/,null,["IPropertyCollection"])},t}(h);t?exports.IPropertyCollection=g:(e._L.IPropertyCollection=g,e._L.Interface.IPropertyCollection=g)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){this._name=String}return e._NS="Interface",e._KIND="interface",e.prototype.clone=function(){throw new s(/EL02131/,null,["IElement"])},e}();t?exports.IElement=a:(e._L.IElement=a,e._L.Interface.IElement=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;if(void 0===(n||i))throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var s=function(){function e(){this._list=Array,this.count=Number}return e._NS="Interface",e._KIND="interface",e}();t?exports.IList=s:(e._L.IList=s,e._L.Interface.IList=s)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.add=function(){throw new s(/EL02151/,null,["IListControl"])},e.prototype.del=function(){throw new s(/EL02152/,null,["IListControl"])},e.prototype.has=function(){throw new s(/EL02153/,null,["IListControl"])},e.prototype.find=function(){throw new s(/EL02154/,null,["IListControl"])},e}();t?exports.IListControl=a:(e._L.IListControl=a,e._L.Interface.IListControl=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.output=function(){throw new s(/EL02351/,null,["ISerialize"])},e.prototype.load=function(e){throw new s(/EL02352/,null,["ISerialize"])},e}();t?exports.ISerialize=a:(e._L.ISerialize=a,e._L.Interface.ISerialize=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./util"),i=require("./i-collection").ICollection;else var s=e._L.Message,a=e._L.ExtendError,l=e._L.Util,c=e._L.ICollection;var u=r||s,f=n||a,p=o||l,h=i||c;if(void 0===f)throw new Error(u.get("ES011",["ExtendError","extend-error"]));if(void 0===p)throw new Error(u.get("ES011",["Util","util"]));if(void 0===h)throw new Error(u.get("ES011",["ICollection","i-collection"]));var g=function(e){function t(){e.call(this)}return p.inherits(t,e),t._KIND="interface",t._NS="Interface",t.prototype.insertAt=function(){throw new f(/EL02221/,null,["IArrayCollection"])},t}(h);t?exports.IArrayCollection=g:(e._L.IArrayCollection=g,e._L.Interface.IArrayCollection=g)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./type"),i=require("./util"),s=require("./i-list").IList,a=require("./i-control-list").IListControl,l=require("./i-serialize").ISerialize;else var c=e._L.Message,u=e._L.ExtendError,f=e._L.Type,p=e._L.Util,h=e._L.IList,g=e._L.IListControl,y=e._L.ISerialize;var d=r||c,m=n||u,w=o||f,_=i||p,b=s||h,E=a||g,v=l||y;if(void 0===m)throw new Error(d.get("ES011",["ExtendError","extend-error"]));if(void 0===w)throw new Error(d.get("ES011",["Type","type"]));if(void 0===_)throw new Error(d.get("ES011",["Util","util"]));if(void 0===b)throw new Error(d.get("ES011",["IList","i-list"]));if(void 0===E)throw new Error(d.get("ES011",["IListControl","i-control-list"]));if(void 0===v)throw new Error(d.get("ES011",["ISerialize","i-serialize"]));var $=function(){function e(){var t=this.$createNsRefer(),r=[],n=!1;Object.defineProperty(this,"$storage",{set:function(e){t=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_storage",{get:function(){return t},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_elemTypes",{get:function(){return r},set:function(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(arguments,0);r=t},configurable:!1,enumerable:!0}),Object.defineProperty(this,"_list",{get:function(){var e=this._storage,t=[],r=[];return function e(n){for(var o in n)if("_type"!==o){var i=n[o];r.push(o),i._type?e(i):t.push(r.join(".")),r.pop()}}(e),t},configurable:!1,enumerable:!0}),Object.defineProperty(this,"count",{get:function(){return this._list.length},configurable:!1,enumerable:!0}),Object.defineProperty(this,"isOverlap",{get:function(){return n},set:function(e){if("boolean"!=typeof e)throw new m(/EL03311/,null,[typeof e]);n=e},configurable:!1,enumerable:!0}),this._$KEYWORD=["namespace","ns","NS","_type"],_.implements(e,this)}function t(e){return"string"==typeof e&&e.length>0}function r(e){return/^[_a-zA-Z]([_0-9a-zA-Z])*$/.test(e)}function n(e){var n=[];if(""===e)return n;if("string"==typeof e){if(!/^[_a-zA-Z]([.]?[_0-9a-zA-Z])*$/.test(e))throw new m(/EL03312/,null,[e]);n=e.split(".")}else{if(!Array.isArray(e))throw new m(/EL03313/,null,[typeof e]);n=e}for(var o=0;o<n.length;o++){var i=n[o];if(!t(i))throw new m(/EL03314/,null,[o,typeof i]);if(!r(i))throw new m(/EL03315/,null,[o,i])}return n}return e._UNION=[b,E],e._NS="Meta",e.prototype.$createNsRefer=function(){return{_type:"ns"}},e.prototype._getPathObject=function(e){var r,n,o,i,s={};if("string"==typeof(r=t(e)?e:this.getPath(e)))return o=(n=r.split(".")).pop(),i=n.join("."),s.ns=i,s.key=o,s},e.prototype.init=function(){this.$storage=this.$createNsRefer()},e.prototype.addNamespace=function(e){var t,r=this._storage;try{t=n(e),this._$KEYWORD.indexOf(t[0])>-1&&(t=t.slice(1));for(var o=0;o<t.length;o+=1){t[o];void 0===r[t[o]]&&(r[t[o]]=this.$createNsRefer()),r=r[t[o]]}}catch(e){throw new m(/EL03321/,e,[])}},e.prototype.delNamespace=function(e){var t,r=this._storage;try{t=n(e);for(var o=0;o<t.length;o+=1){var i=t[o];if(!r[i]||"ns"!==r[i]._type)return;o===t.length-1?delete r[i]:r=r[i]}}catch(e){throw new m(/EL03322/,e,[])}},e.prototype.path=function(e){var t,r=this._storage;if(!e)return r;try{t=n(e);for(var o=0;o<t.length;o+=1){var i=t[o];if(!r[i]||"ns"!==r[i]._type)return;if(o===t.length-1)return r[i];r=r[i]}}catch(e){throw new m(/EL03323/,e,[])}},e.prototype.add=function(e,t){var o,i,s,a,l=this._storage;try{if(s=(i=this._getPathObject(e)).key,o=n(a=i.ns),this._elemTypes.length>0&&w.matchType([this._elemTypes],t),!r(s))throw new m(/EL03331/,null,[s]);if(!this.isOverlap&&this.getPath(t))throw new m(/EL03332/,null,[]);if(0===o.length)return void(l[s]=t);this.addNamespace(a);for(var c=0;c<o.length;c+=1){var u=o[c];c===o.length-1?l[u][s]=t:l=l[u]}}catch(e){throw new m(/EL03333/,e,[])}},e.prototype.del=function(e){var t,r=this._storage;try{t=n(e);for(var o=0;o<t.length;o+=1){var i=t[o];if(!r[i])return!1;if(o===t.length-1)return delete r[i],!0;r=r[i]}}catch(e){throw new m(/EL03334/,e,[])}},e.prototype.has=function(e){return!(!t(e)||!this.find(e))||"string"==typeof this.getPath(e)},e.prototype.find=function(e){var t,r=this._storage;try{t=n(e);for(var o=0;o<t.length;o+=1){var i=t[o];if(!r[i])return;if(o===t.length-1)return r[i];r=r[i]}}catch(e){return}},e.prototype.getPath=function(e){var t=this._storage,r=[];if(!e)throw new m(/EL03341/,null,[typeof e]);return function t(n){for(var o in n){var i=n[o];if("ns"!==i)if(i&&"ns"===i._type){if(r.push(o),t(i))return!0}else if(i===e)return r.push(o),!0}r.pop();return!1}(t)?r.join("."):void 0},e.prototype.output=function(e,t){var r,n=[],o={list:n};try{for(var i=0;i<this._list.length;i++){var s=this._list[i],a=this.find(s),l=this._getPathObject(s);r={ns:l.ns,key:l.key,full:s,elem:a},n.push(r)}return"function"==typeof e?e(o,{space:t}):JSON.stringify(o,null,t)}catch(e){throw new m(/EL03342/,e,[e])}},e.prototype.load=function(e,r){var n=[];if(!t(e))throw new m(/EL03343/,null,[typeof e]);try{n="function"==typeof r?r(e):JSON.parse(e,null),this.init();for(var o=0;o<n.list.length;o++){var i=n.list[o],s=i.elem;this.add(i.full,s)}}catch(e){throw new m(/EL03344/,e,[e.message])}},e}();t?exports.NamespaceManager=$:(e._L.NamespaceManager=$,e._L.Meta.NamespaceManager=$)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;e._L=e._L||{},e._L.Meta=e._L.Meta||{};var r=e._L.Message,n=e._L.ExtendError,o=e._L.Util,i=e._L.NamespaceManager;if(t)var s=require("./message").Message,a=require("./extend-error").ExtendError,l=require("./util"),c=require("./namespace-manager").NamespaceManager;var u=s||r,f=a||n,p=l||o,h=c||i;if(void 0===f)throw new Error(u.get("ES011",["ExtendError","extend-error"]));if(void 0===p)throw new Error(u.get("ES011",["Util","util"]));if(void 0===h)throw new Error(u.get("ES011",["NamespaceManager","namespace-manager"]));var g=function(){function t(){}t._NS="Meta";var r=[],n=new h;function o(e){return"object"==typeof e&&null!==e}function i(e){return"string"==typeof e&&e.length>0}function s(e,r){if(r=r||[],t.isGuidObject(e)&&r.push(e),Array.isArray(e))for(var n=0;n<e.length;n++)o(e[n])&&s(e[n],r);else if(o(e))for(var i in e)o(e[i])&&s(e[i],r);return r}return Object.defineProperty(t,"_list",{get:function(){for(var e=[],t=0;t<r.length;t++)e.push(r[t]);return e},configurable:!1,enumerable:!0}),Object.defineProperty(t,"count",{get:function(){return r.length},configurable:!1,enumerable:!0}),Object.defineProperty(t,"ns",{get:function(){return n},configurable:!1,enumerable:!0}),t.init=function(){r.length=0,this.ns.init()},t.register=function(e){var t,n,o;if(!this.isMetaObject(e))throw new f(/EL03211/,null,[e._type,e._guid]);if(this.has(e))throw new f(/EL03212/,null,[e._guid]);t=e._ns||"",n=(o=e._type).name,e._ns&&e._ns.length,r.push(e),this.registerClass(o,t,n)},t.release=function(e){var t;if("object"!=typeof e&&"string"!=typeof e)throw new f(/EL03213/,null,[typeof e]);if(!i(t="string"==typeof e?e:e._guid))return!1;for(var n=0;n<r.length;n++)if(r[n]._guid===t)return r.splice(n,1),!0;return!1},t.has=function(e){var t=o(e)?e._guid:e;if(!i(t))return!1;for(var n=0;n<r.length;n++)if(r[n]._guid===t)return!0;return!1},t.find=function(e){var t=o(e)?e._guid:e;if(i(t))for(var n=0;n<r.length;n++)if(r[n]._guid===t)return r[n]},t.isMetaObject=function(e){return!!o(e)&&!(!i(e._guid)||"function"!=typeof e._type)},t.createMetaObject=function(e,t){var r,n,s,a,l,c=t||e,u=[null];if(!o(e))throw new f(/EL03221/,null,[typeof e]);if(!i(e._type))throw new f(/EL03222/,null,[typeof e._type]);if(!o(c))throw new f(/EL03223/,null,[typeof c]);if(r=e._type,s=""!==(n=e._ns||"")?[n,r].join("."):r,"function"!=typeof(a=this.getClass(s)))throw new f(/EL03224/,null,[s,typeof a]);l=Object.prototype.hasOwnProperty.call(a,"_PARAMS")?a._PARAMS:[];for(var p=0;p<l.length;p++){var h,g=l[p],y=e[g];h=o(y)&&y.$ref?this.findSetObject(y.$ref,c):y,e[g]&&u.push(h)}return new(Function.prototype.bind.apply(a,u))},t.createReferObject=function(e){if(!o(e))throw new f(/EL03225/,null,[typeof e]);if(!i(e._guid))throw new f(/EL03226/,null,[typeof e._guid]);return{$ref:e._guid}},t.createNsReferObject=function(e){var t,r;if("function"!=typeof e)throw new f(/EL03227/,null,[typeof e]);return this.findClass(e)||(t=e._NS||"",r=e.name,this.registerClass(e,t,r)),{$ns:this.findClass(e)}},t.setMetaObject=function(e,t){if(!o(e))throw new f(/EL03241/,null,[typeof e]);if(!o(t))throw new f(/EL03242/,null,[typeof t]);if(!i(t._guid))throw new f(/EL03243/,null,[typeof t._guid]);return e.$set=t._guid,e},t.validObject=function(e){var t,r=this;if(!o(e))throw new f(/EL03251/,null,[typeof e]);return t=s(e),!!(function(){for(var e=0;e<t.length;e++)for(var r=0;r<t.length;r++)if(t[e]._guid===t[r]._guid&&e!==r)return!1;return!0}()&&function e(i){if(i.$ref&&!n(i.$ref,t))return!1;if(i.$set&&!n(i.$set,t))return!1;if(i.$ns&&!r.getClass(i.$ns))return!1;if(Array.isArray(i)){for(var s=0;s<i.length;s++)if(o(i[s])&&!e(i[s]))return!1}else for(var a in i)if(o(i[a])&&!e(i[a]))return!1;return!0}(e)&&function t(r){if(Array.isArray(r._elem)&&Array.isArray(r._key)&&r._elem.length!==r._key.length)return!1;if(Array.isArray(r)){for(var n=0;n<r.length;n++)if(o(r[n])&&!t(r[n]))return!1}else for(var i in e)if(o(r[i])&&!t(r[i]))return!1;return!0}(e));function n(e,t){for(var r=0;r<t.length;r++)if(t[r]._guid===e)return t[r]}},t.isGuidObject=function(e){return!!o(e)&&!(!i(e._guid)||!i(e._type))},t.hasGuidObject=function(e,t){var r=o(e)?e._guid:e,n=[];if(!i(r))throw new f(/EL03252/,null,[typeof r]);Array.isArray(t)?n=t:n.push(t);for(var a=0;a<n.length;a++){var l=n[a],c=s(l);if(!o(l))throw new f(/EL03253/,null,[a,typeof r]);for(var u=0;u<c.length;u++)if(c[u]._guid===r)return!0}return!1},t.hasRefer=function(e){if(!o(e))throw new f(/EL03254/,null,[typeof e]);if(!this.isGuidObject(e))throw new f(/EL03255/,null,[e._type,e._guid]);return function e(t){if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("object"==typeof t[r]&&e(t[r]))return!0}else{if(t.$ref&&i(t.$ref))return!0;if(t.$ns&&i(t.$ns))return!0;for(var n in t)if(o(t[n])&&e(t[n]))return!0}return!1}(e)},t.findSetObject=function(e,r){var n=o(e)?e._guid:e,s=r;if(!i(n))throw new f(/EL03256/,null,[n]);if(!o(s))throw new f(/EL03257/,null,[typeof s]);return function e(r){var o;if(Array.isArray(r)){for(var i=0;i<r.length;i++)if("object"==typeof r[i]&&(o=e(r[i])))return o}else{if(r._guid&&r._guid===n)return o=r.$set?t.find(r.$set):void 0;for(var s in r)if("object"==typeof r[s]&&(o=e(r[s])))return o}return o}(s)},t.transformRefer=function(e){var t,r,n=this;if(!o(e))throw new f(/EL03244/,null,[typeof e]);return t=s(e),function e(t,r,i){i=i||"";if(Array.isArray(t))for(var s=0;s<t.length;s++)"object"==typeof t[s]&&e(t[s],r);else for(var a in t)if(o(t[a]))if(t[a].$ns){var l=n.getClass(t[a].$ns);if("function"!=typeof l)throw new f(/EL03245/,null,[i,a]);t[a]=l}else e(t[a],r,i?i+"."+a:a)}(r=p.deepCopy(e),t),r},t.registerClass=function(t,r,n){var s,a;if(!o(t)&&"function"!=typeof t)throw new f(/EL03231/,null,[typeof t]);if(r&&"string"!=typeof r)throw new f(/EL03232/,null,[typeof r]);if(n&&!i(n))throw new f(/EL03233/,null,[typeof n]);(s=n?r.length>0?r+"."+n:n:r,"function"!=typeof(a=t)||a!==Number&&a!==String&&a!==Boolean&&a!==Function&&a!==Object&&a!==Array&&a!==RegExp&&a!==Date&&a!==Symbol&&a!==BigInt)&&("function"!=typeof e[s]&&(this.ns.find(s)||this.ns.add(s,t)))},t.releaseClass=function(t){if(!i(t))throw new f(/EL03234/,null,[typeof t]);return"function"==typeof e[t]||this.ns.del(t)},t.findClass=function(t){var r;if("function"!=typeof t)throw new f(/EL03235/,null,[typeof t]);return r=t.name,"function"==typeof e[r]?r:this.ns.getPath(t)},t.getClass=function(t){if(!i(t))throw new f(/EL03236/,null,[typeof t]);return"function"==typeof e[t]?e[t]:this.ns.find(t)},t.loadMetaObject=function(e,t){var r,n,o=e;if("string"!=typeof e)throw new f(/EL03246/,null,[typeof str]);if(o="function"==typeof t?t(o):JSON.parse(o,null),this.has(o))return this.find(o._guid);if(!this.isGuidObject(o))throw new f(/EL03247/,null,[o._type,o._guid]);return r=this.transformRefer(o),(n=this.createMetaObject(r)).setObject(r),n},t}();t&&(exports.MetaRegistry=g),e._L.MetaRegistry=g,e._L.Meta.MetaRegistry=g}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;e._L=e._L||{},e._L.Meta=e._L.Meta||{};var r=e._L.Message,n=e._L.ExtendError,o=e._L.Type,i=e._L.Util,s=e._L.IObject,a=e._L.IMarshal,l=e._L.MetaRegistry;if(t)var c=require("./message").Message,u=require("./extend-error").ExtendError,f=require("./type"),p=require("./util"),h=require("./i-object").IObject,g=require("./i-marshal").IMarshal,y=require("./meta-registry").MetaRegistry;var d=c||r,m=u||n,w=f||o,_=p||i,b=h||s,E=g||a,v=y||l;if(void 0===m)throw new Error(d.get("ES011",["ExtendError","extend-error"]));if(void 0===w)throw new Error(d.get("ES011",["Type","type"]));if(void 0===_)throw new Error(d.get("ES011",["Util","util"]));if(void 0===b)throw new Error(d.get("ES011",["IObject","i-object"]));if(void 0===E)throw new Error(d.get("ES011",["IMarshal","i-marshal"]));if(void 0===v)throw new Error(d.get("ES011",["MetaRegistry","meta-registry"]));var $=function(){function e(){var t;if(Object.defineProperty(this,"$guid",{get:function(){return t},set:function(e){t=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_guid",{get:function(){return t||(t=_.createGuid()),t},configurable:!1,enumerable:!0}),Object.defineProperty(this,"_type",{get:function(){return(this.__proto__||Object.getPrototypeOf(this)).constructor},configurable:!1,enumerable:!0}),Object.prototype.hasOwnProperty.call(this._type,"_KIND")){var r=this._type._KIND.toLowerCase();if(["abstract","interface","enum","function"].indexOf(r)>-1)throw new m(/EL03111/,null,[this._type.name,r])}this._type&&this._type._NS&&(this._ns=this._type._NS),v.register(this),_.implements(e,this)}function t(e){return"object"==typeof e&&null!==e}return e._UNION=[b,E],e._NS="Meta",e._PARAMS=[],e.prototype.equal=function(r){return function(r,n){if(r===n)return!0;if(r instanceof e&&n instanceof e){var o=r.getObject(2),i=n.getObject(2);return w.deepEqual(o,i)}return!(!t(r)||!t(n))&&w.deepEqual(r,n)}(this,r)},e.prototype.getTypes=function(){return function e(t){var r=[];var n=t.__proto__||Object.getPrototypeOf(t);n&&(r.push(n.constructor),r=r.concat(e(n)));return r}(this)},e.prototype.instanceOf=function(e){var t=this,r=this._interface;return"string"==typeof e?function(e){for(var n=t.getTypes(),o=0;o<n.length;o++)if(e===n[o].name)return!0;for(var o=0;o<r.length;o++)if(e===r[o].name)return!0;return!1}(e):"function"==typeof e&&function(e){for(var n=t.getTypes(),o=0;o<n.length;o++)if(e===n[o])return!0;for(var o=0;o<r.length;o++)if(e===r[o])return!0;return!1}(e)},e.prototype.getObject=function(e,t){var r=e||0,n={};t?[].concat(t,n):[].concat(n);return r<2&&r>-1&&(n._guid=this._guid),n._type=this._type._NS?this._type._NS+"."+this._type.name:this._type.name,n},e.prototype.setObject=function(e,r){var n=r||e,o=this._type._NS?this._type._NS+"."+this._type.name:this._type.name;if(!t(e))throw new m(/EL03112/,null,[typeof e]);if(e._type!==o)throw new m(/EL03113/,null,[e._type,o]);if(!v.isGuidObject(n))throw new m(/EL03114/,null,[r._type,r._guid]);n.__TRANSFORM_REFER||((n=v.transformRefer(n)).__TRANSFORM_REFER=!0),v.setMetaObject(e,this)},e}();t?exports.MetaObject=$:(e._L.MetaObject=$,e._L.Meta.MetaObject=$)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./util"),i=require("./meta-object").MetaObject,s=require("./i-element").IElement;else var a=e._L.Message,l=e._L.ExtendError,c=e._L.Util,u=e._L.MetaObject,f=e._L.IElement;var p=r||a,h=n||l,g=o||c,y=s||f,d=i||u;if(void 0===h)throw new Error(p.get("ES011",["ExtendError","extend-error"]));if(void 0===g)throw new Error(p.get("ES011",["Util","util"]));if(void 0===y)throw new Error(p.get("ES011",["IElement","i-element"]));if(void 0===d)throw new Error(p.get("ES011",["MetaObject","meta-object"]));var m=function(e){function t(r){var n;e.call(this),Object.defineProperty(this,"$name",{get:function(){return n},set:function(e){if("string"!=typeof e)throw new h(/EL03121/,null,[typeof val]);if(0===e.length)throw new h(/EL03122/,null,[]);n=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_name",{get:function(){return n},configurable:!1,enumerable:!0}),this.$name=r,g.implements(t,this)}return g.inherits(t,e),t._UNION=[y],t._NS="Meta",t._PARAMS=["name"],t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r);r?[].concat(r,n):[].concat(n);return n.name=this._name,n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);this.$name=t.name},t.prototype.clone=function(){return new t(this._name)},t}(d);t?exports.MetaElement=m:(e._L.MetaElement=m,e._L.Meta.MetaElement=m)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Collection=e._L.Collection||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./type"),i=require("./util"),s=require("./observer").Observer,a=require("./i-collection").ICollection,l=require("./i-list").IList,c=require("./meta-registry").MetaRegistry,u=require("./meta-object").MetaObject;else var f=e._L.Message,p=e._L.ExtendError,h=e._L.Type,g=e._L.Util,y=e._L.Observer,d=e._L.ICollection,m=e._L.IList,w=e._L.MetaRegistry,_=e._L.MetaObject;var b=r||f,E=n||p,v=s||y,$=o||h,L=i||g,O=a||d,j=l||m,S=u||_,M=c||w;if(void 0===E)throw new Error(b.get("ES011",["ExtendError","extend-error"]));if(void 0===$)throw new Error(b.get("ES011",["Type","type"]));if(void 0===L)throw new Error(b.get("ES011",["Util","util"]));if(void 0===v)throw new Error(b.get("ES011",["Observer","observer"]));if(void 0===O)throw new Error(b.get("ES011",["ICollection","i-collection"]));if(void 0===j)throw new Error(b.get("ES011",["IList","i-list"]));if(void 0===M)throw new Error(b.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===S)throw new Error(b.get("ES011",["MetaObject","meta-object"]));var x=function(e){function t(r){e.call(this);var n=new v(this,this),o=r||null,i=[],s=[],a=[],l=[];Object.defineProperty(this,"$elements",{get:function(){return i},set:function(e){i=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"$descriptors",{get:function(){return s},set:function(e){s=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"$event",{get:function(){return n},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_owner",{get:function(){return o},set:function(e){o=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_elements",{get:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t]);return e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_descriptors",{get:function(){for(var e=[],t=0;t<s.length;t++)e.push(s[t]);return e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_elemTypes",{get:function(){return a},set:function(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(arguments,0),r=t.length>0&&"string"==typeof t[0]?t[0]:"";t.length>0&&null===/^_[a-zA-Z]+_/.exec(r)&&(t=["_req_"].concat(t)),a=t},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_list",{get:function(){return this._elements},configurable:!1,enumerable:!1}),Object.defineProperty(this,"count",{get:function(){return this._elements.length},enumerable:!1,configurable:!1}),Object.defineProperty(this,"$KEYWORD",{get:function(){return l},set:function(e){l=l.concat(e)},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onAdd",{set:function(e){this.$event.subscribe(e,"add")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onAdded",{set:function(e){this.$event.subscribe(e,"added")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onRemove",{set:function(e){this.$event.subscribe(e,"remove")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onRemoved",{set:function(e){this.$event.subscribe(e,"removed")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onClear",{set:function(e){this.$event.subscribe(e,"clear")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onCleared",{set:function(e){this.$event.subscribe(e,"cleared")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onChanging",{set:function(e){this.$event.subscribe(e,"changing")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onChanged",{set:function(e){this.$event.subscribe(e,"changed")},configurable:!1,enumerable:!1}),this.$KEYWORD=["$event","_owner","_elements","_descriptors","_elemTypes","_list","count","$KEYWORD"],this.$KEYWORD=["onAdd","onAdded","onRemove","onRemoved","onClear","onCleared","onChanging","onChanged"],this.$KEYWORD=["_onAdd","_onAdded","_onRemove","_onRemoved","_onClear","_onCleared","_onChanging","_onChanged"],this.$KEYWORD=["_getPropDescriptor","getObject","setObject","_guid","_type"],this.$KEYWORD=["_remove","remove","removeAt","contains","indexOf","add","clear"],L.implements(t,this)}return L.inherits(t,e),t._UNION=[O,j],t._NS="Collection",t._PARAMS=["_owner"],t._KIND="abstract",t.prototype._onAdd=function(e,t){this.$event.publish("add",e,t,this)},t.prototype._onAdded=function(e,t){this.$event.publish("added",e,t,this)},t.prototype._onRemove=function(e,t){this.$event.publish("remove",e,t,this)},t.prototype._onRemoved=function(e,t){this.$event.publish("removed",e,t,this)},t.prototype._onClear=function(){this.$event.publish("clear",this)},t.prototype._onCleared=function(){this.$event.publish("cleared",this)},t.prototype._onChanging=function(e,t){this.$event.publish("changing",e,t,this)},t.prototype._onChanged=function(e,t){this.$event.publish("changed",e,t,this)},t.prototype._getPropDescriptor=function(e){return{get:function(){return this.$elements[e]},set:function(t){this._elemTypes.length>0&&$.matchType([this._elemTypes],t),this._onChanging(e,t),this.$elements[e]=t,this._onChanged(e,t)},configurable:!0,enumerable:!0}},t.prototype._remove=function(){throw new E(/EL04111/,null,[])},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=(r?[].concat(r,n):[].concat(n),[]);$.deepEqual(this.$event.$subscribers,this.$event._getInitObject())||(n.$subscribers=this.$event.$subscribers),o<2&&o>-1&&this._owner&&(n._owner=M.createReferObject(this._owner));for(var s=0;s<this._elemTypes.length;s++){var a=this._elemTypes[s];"function"==typeof a?i.push(M.createNsReferObject(a)):i.push(a)}return n._elemTypes=i,n},t.prototype.setObject=function(t,r){var n;e.prototype.setObject.call(this,t,r);var o=r||t;if(this.clear(),t.$subscribers&&(this.$event.$subscribers=t.$subscribers),t._owner){if(!(n=M.findSetObject(t._owner.$ref,o)))throw new E(/EL04112/,null,[t._owner.$ref]);this._owner=n}Array.isArray(t._elemTypes)&&t._elemTypes.length>0&&(this._elemTypes=t._elemTypes)},t.prototype.remove=function(e){var t=this._elements.indexOf(e);return t>=0&&this.removeAt(t)?t:-1},t.prototype.removeAt=function(e){var t;if("number"!=typeof e)throw new E(/EL04113/,null,[typeof e]);return!!(t=this._elements[e])&&(this._onRemove(e,t),!!this._remove(e)&&(this._onRemoved(e,t),!0))},t.prototype.contains=function(e){return this._elements.indexOf(e)>-1},t.prototype.indexOf=function(e){return this._elements.indexOf(e)},t.prototype.add=function(){throw new E(/EL04114/,null,["add(any): number"])},t.prototype.clear=function(){throw new E(/EL04115/,null,["clear()"])},t}(S);t?exports.BaseCollection=x:(e._L.BaseCollection=x,e._L.Collection.BaseCollection=x)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Collection=e._L.Collection||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./type"),i=require("./util"),s=require("./i-collection-array").IArrayCollection,a=require("./base-collection").BaseCollection,l=require("./meta-object").MetaObject,c=require("./meta-registry").MetaRegistry;else var u=e._L.Message,f=e._L.ExtendError,p=e._L.Type,h=e._L.Util,g=e._L.IArrayCollection,y=e._L.BaseCollection,d=e._L.MetaObject,m=e._L.MetaRegistry;var w=r||u,_=n||f,b=o||p,E=i||h,v=a||y,$=s||g,L=l||d,O=c||m;if(void 0===_)throw new Error(w.get("ES011",["ExtendError","extend-error"]));if(void 0===b)throw new Error(w.get("ES011",["Type","type"]));if(void 0===E)throw new Error(w.get("ES011",["Util","util"]));if(void 0===$)throw new Error(w.get("ES011",["IArrayCollection","i-collection-array"]));if(void 0===O)throw new Error(w.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===L)throw new Error(w.get("ES011",["MetaObject","meta-object"]));if(void 0===v)throw new Error(w.get("ES011",["BaseCollection","base-collection"]));var j=function(e){function t(r){e.call(this,r),this.$KEYWORD=["insertAt"],E.implements(t,this)}function r(e){return"object"==typeof e&&null!==e}return E.inherits(t,e),t._UNION=[$],t._NS="Collection",t._PARAMS=["_owner"],t.prototype._remove=function(e){var t=this.count-1;if(this.$elements.splice(e,1),this.$descriptors.splice(e,1),e<t){for(var r=e;r<t;r++){var n=this._descriptors[r]?this._descriptors[r]:this._getPropDescriptor(r);Object.defineProperty(this,[r],n)}delete this[t]}else delete this[e];return!0},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=r?[].concat(r,n):[].concat(n);if(this._descriptors.length>0){n._desc=[];for(var s=0;s<this._descriptors.length;s++)n._desc.push(this._descriptors[s])}n._elem=[];for(s=0;s<this._elements.length;s++){var a=this._elements[s];a instanceof L?O.hasGuidObject(a,i)?n._elem.push(O.createReferObject(a)):n._elem.push(a.getObject(o,i)):n._elem.push(a)}return n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n=r||t;if(Array.isArray(t._desc)&&t._desc.length>0)for(var o=0;o<t._desc.length;o++)this.$descriptors.push(t._desc[o]);for(o=0;o<t._elem.length;o++)Object.defineProperty(this,[o],this._getPropDescriptor(o));for(o=0;o<t._elem.length;o++){var i=t._elem[o];if(O.isGuidObject(i)){var s=O.createMetaObject(i,n);s.setObject(i,n),this.$elements.push(s)}else if(i.$ref){var a=O.findSetObject(i.$ref,n);if(!a)throw new _(/EL04211/,null,[o,i.$ref]);this.$elements.push(a)}else this.$elements.push(i)}},t.prototype.add=function(e,t){var r=this.count;return this.insertAt(r,e,t),r},t.prototype.clear=function(){this._onClear();for(var e=0;e<this.count;e++)delete this[e];this.$elements=[],this.$descriptors=[],this._onCleared()},t.prototype.insertAt=function(e,t,n){try{var o=this.count;if("number"!=typeof e)throw new _(/EL04212/,null,[typeof e]);if(o<e)throw new _(/EL04213/,null,[e,o]);if(e<0)throw new _(/EL04214/,null,[e]);this._elemTypes.length>0&&b.matchType([this._elemTypes],t),r(n)&&!1===n.configurable&&w.warn("WS011",["configurable = false","element"]),r(n)&&!1===n.writable&&w.warn("WS011",["writable = false","element"]),this._onAdd(e,t),this.$elements.splice(e,0,t),this.$descriptors.splice(e,0,n),r(n)?Object.defineProperty(this,[e],n):Object.defineProperty(this,[e],this._getPropDescriptor(e));for(var i=e+1;i<this.count;i++){var s=this._descriptors[i]?this._descriptors[i]:this._getPropDescriptor(i);Object.defineProperty(this,[i],s)}return this._onAdded(e,t),!0}catch(r){throw new _(/EL04215/,r,[e,t])}},t}(v);t?exports.ArrayCollection=j:(e._L.ArrayCollection=j,e._L.Collection.ArrayCollection=j)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Collection=e._L.Collection||{},t)var r=require("./message").Message,n=require("./extend-error").ExtendError,o=require("./type"),i=require("./util"),s=require("./i-collection-property").IPropertyCollection,a=require("./base-collection").BaseCollection,l=require("./meta-object").MetaObject,c=require("./meta-registry").MetaRegistry;else var u=e._L.Message,f=e._L.ExtendError,p=e._L.Type,h=e._L.Util,g=e._L.IPropertyCollection,y=e._L.BaseCollection,d=e._L.MetaObject,m=e._L.MetaRegistry;var w=r||u,_=n||f,b=o||p,E=i||h,v=s||g,$=a||y,L=l||d,O=c||m;if(void 0===_)throw new Error(w.get("ES011",["ExtendError","extend-error"]));if(void 0===b)throw new Error(w.get("ES011",["Type","type"]));if(void 0===E)throw new Error(w.get("ES011",["Util","util"]));if(void 0===v)throw new Error(w.get("ES011",["IPropertyCollection","i-collection-property"]));if(void 0===O)throw new Error(w.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===L)throw new Error(w.get("ES011",["MetaObject","meta-object"]));if(void 0===$)throw new Error(w.get("ES011",["BaseCollection","base-collection"]));var j=function(e){function t(r){e.call(this,r);var n=[];Object.defineProperty(this,"$keys",{get:function(){return n},set:function(e){n=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_keys",{get:function(){for(var e=[],t=0;t<n.length;t++)e.push(n[t]);return e},configurable:!1,enumerable:!1}),this.$KEYWORD=["_keys","indexOf","exist","keyOf"],E.implements(t,this)}function r(e){return"object"==typeof e&&null!==e}function n(e){return"string"==typeof e&&e.length>0}return E.inherits(t,e),t._UNION=[v],t._NS="Collection",t._PARAMS=["_owner"],t.prototype._remove=function(e){var t=this.count-1,r=this.keyOf(e);if(delete this[r],this.$elements.splice(e,1),this.$keys.splice(e,1),this.$descriptors.splice(e,1),e<t){for(var n=e;n<t;n++){var o=this._descriptors[n]?this._descriptors[n]:this._getPropDescriptor(n);r=this.keyOf(n),Object.defineProperty(this,[n],o),Object.defineProperty(this,r,o)}delete this[t]}else delete this[e];return!0},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=r?[].concat(r,n):[].concat(n);if(this._descriptors.length>0){n._desc=[];for(var s=0;s<this._descriptors.length;s++)n._desc.push(this._descriptors[s])}n._elem=[];for(s=0;s<this.count;s++){var a=this._elements[s];a instanceof L?O.hasGuidObject(a,i)?n._elem.push(O.createReferObject(a)):n._elem.push(a.getObject(o,i)):n._elem.push(a)}n._key=[];for(s=0;s<this._keys.length;s++){var l=this._keys[s];n._key.push(l)}return n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n=r||t;if(t._elem.length!==t._key.length)throw new _(/EL04221/,null,[t._elem.length,t._key.length]);if(Array.isArray(t._desc)&&t._desc.length>0){if(t._elem.length!==t._desc.length)throw new _(/EL04222/,null,[t._elem.length,t._desc.length]);for(var o=0;o<t._desc.length;o++)this.$descriptors.push(t._desc[o])}this.$keys=[];for(o=0;o<t._key.length;o++){var i=t._key[o];this.$keys.push(i),Object.defineProperty(this,[o],this._getPropDescriptor(o)),Object.defineProperty(this,i,this._getPropDescriptor(o))}for(o=0;o<t._elem.length;o++){var s=t._elem[o];if(O.isGuidObject(s)){var a=O.createMetaObject(s,n);a.setObject(s,n),this.$elements.push(a)}else if(s.$ref){var l=O.findSetObject(s.$ref,n);if(!l)throw new _(/EL04223/,null,[o,s.$ref]);this.$elements.push(l)}else this.$elements.push(s)}},t.prototype.indexOf=function(e,t){if(t||!1){if(!n(e))throw new _(/EL04224/,null,[typeof e]);return this._keys.indexOf(e)}return this._elements.indexOf(e)},t.prototype.add=function(e,t,o){try{var i=this.count,s=/^[a-zA-Z_][a-zA-Z0-9_]*/;if(!n(e))throw new _(/EL04225/,null,[e]);if(!s.test(e))throw new _(/EL04226/,null,[e,s.source]);if(this.$KEYWORD.indexOf(e)>-1)throw new _(/EL04227/,null,[e]);if(this.exist(e))throw new _(/EL04228/,null,[e]);return this._elemTypes.length>0&&b.matchType([this._elemTypes],t),r(o)&&!1===o.configurable&&w.warn("WS011",["configurable = true","element"]),r(o)&&!1===o.writable&&w.warn("WS011",["writable = true","element"]),this._onAdd(i,t),this.$elements.push(t),this.$keys.push(e),this.$descriptors.push(o),r(o)?(Object.defineProperty(this,[i],o),Object.defineProperty(this,e,o)):(Object.defineProperty(this,[i],this._getPropDescriptor(i)),Object.defineProperty(this,e,this._getPropDescriptor(i))),this._onAdded(i,t),i}catch(r){throw new _(/EL04229/,r,[e,t])}},t.prototype.clear=function(){this._onClear();for(var e=0;e<this.count;e++){var t=this.keyOf(e);delete this[e],delete this[t]}this.$elements=[],this.$descriptors=[],this.$keys=[],this._onCleared()},t.prototype.keyOf=function(e){if("number"!=typeof e)throw new _(/EL0422A/,null,[typeof e]);return this._keys[e]},t.prototype.exist=function(e){if(!n(e))throw new _(/EL0422B/,null,[typeof e]);return Object.prototype.hasOwnProperty.call(this,e)},t}($);t?exports.PropertyCollection=j:(e._L.PropertyCollection=j,e._L.Collection.PropertyCollection=j)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.write=function(){throw new s(/EL02311/,null,["IExportControl"])},e}();t?exports.IExportControl=a:(e._L.IExportControl=a,e._L.Interface.IExportControl=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.merge=function(){throw new s(/EL02331/,null,["IGroupControl"])},e.prototype.copy=function(){throw new s(/EL02332/,null,["IGroupControl"])},e}();t?exports.IGroupControl=a:(e._L.IGroupControl=a,e._L.Interface.IGroupControl=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.read=function(){throw new s(/EL02321/,null,["IImportControl"])},e}();t?exports.IImportControl=a:(e._L.IImportControl=a,e._L.Interface.IImportControl=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.readSchema=function(){throw new s(/EL02341/,null,["ISchemaControl"])},e.prototype.writeSchema=function(){throw new s(/EL02342/,null,["ISchemaControl"])},e}();t?exports.ISchemaControl=a:(e._L.ISchemaControl=a,e._L.Interface.ISchemaControl=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Interface=e._L.Interface||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError;else var o=e._L.Message,i=e._L.ExtendError;var s=n||i;if(void 0===s)throw new Error((r||o).get("ES011",["ExtendError","extend-error"]));var a=function(){function e(){}return e._NS="Interface",e._KIND="interface",e.prototype.acceptChanges=function(){throw new s(/EL02361/,null,["ITransaction"])},e.prototype.rejectChanges=function(){throw new s(/EL02362/,null,["ITransaction"])},e}();t?exports.ITransaction=a:(e._L.ITransaction=a,e._L.Interface.ITransaction=a)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Collection=e._L.Collection||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Util,i=require("logic-core").MetaObject,s=require("logic-core").IArrayCollection;else var a=e._L.Message,l=e._L.ExtendError,c=e._L.Util,u=e._L.MetaObject,f=e._L.IArrayCollection;var p=r||a,h=n||l,g=o||c,y=i||u,d=s||f;if(void 0===h)throw new Error(p.get("ES011",["ExtendError","extend-error"]));if(void 0===g)throw new Error(p.get("ES011",["Util","util"]));if(void 0===d)throw new Error(p.get("ES011",["IArrayCollection","i-collection-array"]));if(void 0===y)throw new Error(p.get("ES011",["MetaObject","meta-object"]));var m=function(){function e(e){var t,r=[];Object.defineProperty(this,"queue",{get:function(){return r},configurable:!1,enumerable:!0}),Object.defineProperty(this,"collection",{get:function(){return t},set:function(e){if(!(e instanceof y))throw new h(/EL04321/,null,[]);if(!e.isImplementOf(d))throw new h(/EL04322/,null,[]);t=e},configurable:!1,enumerable:!0}),this.collection=e}return e._NS="Collection",e._PARAMS=["_owner"],e.prototype.init=function(){this.queue.length=0},e.prototype.commit=function(){this.init()},e.prototype.rollback=function(){for(var e,t,r=this.queue.length-1;r>=0;r--)if("I"===(t=this.queue[r]).cmd)e=t.pos,this.collection.removeAt(e);else if("D"===t.cmd)e=t.pos,this.collection.insertAt(e,t.clone);else{if("U"!==t.cmd)throw new h(/EL04323/,null,[t.cmd]);e=t.pos,this.collection.removeAt(e),this.collection.insertAt(e,t.clone)}this.init()},e.prototype.insert=function(e,t,r){this.queue.push({cmd:"I",pos:e,ref:t,clone:null,etc:r||""})},e.prototype.delete=function(e,t,r){this.queue.push({cmd:"D",pos:e,ref:null,clone:t,etc:r||""})},e.prototype.update=function(e,t,r,n){this.queue.push({cmd:"U",pos:e,ref:t,clone:r,etc:n||""})},e.prototype.select=function(){return this.queue},e}();t?exports.TransactionQueue=m:(e._L.TransactionQueue=m,e._L.Collection.TransactionQueue=m)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Collection=e._L.Collection||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").ArrayCollection,a=require("./trans-queue").TransactionQueue;else var l=e._L.Message,c=e._L.ExtendError,u=e._L.Type,f=e._L.Util,p=e._L.ArrayCollection,h=e._L.TransactionQueue;var g,y=r||l,d=o||u,m=i||f,w=s||p,_=a||h;if(void 0===(g=n||c))throw new Error(y.get("ES011",["ExtendError","extend-error"]));if(void 0===d)throw new Error(y.get("ES011",["Type","type"]));if(void 0===m)throw new Error(y.get("ES011",["Util","util"]));if(void 0===w)throw new Error(y.get("ES011",["ArrayCollection","i-collection-array"]));if(void 0===_)throw new Error(y.get("ES011",["TransactionQueue","trans-queue"]));var b=function(e){function t(t){e.call(this,t);var r=new _(this),n=!1;Object.defineProperty(this,"_transQueue",{get:function(){return r},configurable:!1,enumerable:!1}),Object.defineProperty(this,"autoChanges",{get:function(){return n},set:function(e){if("boolean"!=typeof e)throw new g(/EL04311/,null,[this.constructor.name,typeof e]);n=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"hasChanges",{get:function(){return r.queue.length>0},configurable:!1,enumerable:!1}),this.$KEYWORD=["_transQueue","autoChanges","hasChanges"],this.$KEYWORD=["commit","rollback"]}return m.inherits(t,e),t._NS="Collection",t._PARAMS=["_owner"],t.prototype._getPropDescriptor=function(e){return{get:function(){return this._elements[e]},set:function(t){this._elemTypes.length>0&&d.matchType([this._elemTypes],t),this._transQueue.update(e,t,this._elements[e]),this.$elements[e]=t},configurable:!0,enumerable:!0}},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r);r?[].concat(r,n):[].concat(n);return!1!==this.autoChanges&&(n.autoChanges=this.autoChanges),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r),this._transQueue.init(),t.autoChanges&&(this.autoChanges=t.autoChanges)},t.prototype.removeAt=function(t){return this.autoChanges||this._transQueue.delete(t,this[t]),e.prototype.removeAt.call(this,t)},t.prototype.clear=function(){e.prototype.clear.call(this),this._transQueue.init()},t.prototype.insertAt=function(t,r,n){return this.autoChanges||this._transQueue.insert(t,r),e.prototype.insertAt.call(this,t,r,n)},t.prototype.commit=function(){this._transQueue.commit()},t.prototype.rollback=function(){this._transQueue.rollback()},t}(w);t?exports.TransactionCollection=b:(e._L.TransactionCollection=b,e._L.Collection.TransactionCollection=b)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").Observer,a=require("logic-core").IList,l=require("logic-core").MetaObject,c=require("./collection-transaction").TransactionCollection,u=require("logic-core").MetaRegistry;else var f=e._L.Message,p=e._L.ExtendError,h=e._L.Type,g=e._L.Util,y=e._L.Observer,d=e._L.MetaObject,m=e._L.IList,w=e._L.TransactionCollection,_=e._L.MetaRegistry;var b=r||f,E=n||p,v=o||h,$=i||g,L=s||y,O=a||m,j=l||d,S=c||w,M=u||_;if(void 0===E)throw new Error(b.get("ES011",["ExtendError","extend-error"]));if(void 0===v)throw new Error(b.get("ES011",["Type","type"]));if(void 0===$)throw new Error(b.get("ES011",["Util","util"]));if(void 0===L)throw new Error(b.get("ES011",["Observer","observer"]));if(void 0===O)throw new Error(b.get("ES011",["IList","i-list"]));if(void 0===M)throw new Error(b.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===j)throw new Error(b.get("ES011",["MetaObject","meta-object"]));if(void 0===S)throw new Error(b.get("ES011",["TransactionCollection","collection-transaction"]));var x=function(e){function t(r){e.call(this);var n=new L(this),o=null,i=[],s=[],a=this;if(Object.defineProperty(this,"$elements",{get:function(){return i},set:function(e){i=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"$event",{get:function(){return n},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_entity",{get:function(){return o},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_elements",{get:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t]);return e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_keys",{get:function(){for(var e=[],t=0;t<s.length;t++)e.push(s[t]);return e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_list",{get:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t]);return e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"count",{get:function(){return i.length},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onChanging",{set:function(e){this.$event.subscribe(e,"onChanging")},configurable:!1,enumerable:!1}),Object.defineProperty(this,"onChanged",{set:function(e){this.$event.subscribe(e,"onChanged")},configurable:!1,enumerable:!1}),!(r instanceof j&&r.instanceOf("BaseEntity")))throw new E(/EL05211/,null,[]);o=r;for(var l=0;l<o.columns.count;l++){var c=i.length,u=o.columns[l].alias;i.push(o.columns[l].default),s.push(u),Object.defineProperty(this,[l],f(c)),Object.defineProperty(this,u,f(c))}function f(e){return{get:function(){return i[e]},set:function(t){var r,n=i[e];if((r=o.columns[e])&&r._valueTypes.length>0&&v.matchType([r._valueTypes],t),o&&!o.rows.autoChanges){var s="idx:"+e+", new:"+t+", old:"+n,l=o.rows.indexOf(this);l>-1&&o.rows._transQueue.update(l,this,this.clone(),s)}a._onChanging(e,t,n),i[e]=t,a._onChanged(e,t,n)},enumerable:!0,configurable:!1}}$.implements(t,this)}return $.inherits(t,e),t._UNION=[O],t._NS="Meta.Entity",t._PARAMS=["_entity"],t.prototype._onChanging=function(e,t,r){this.$event.publish("onChanging",e,t,r,this)},t.prototype._onChanged=function(e,t,r){this.$event.publish("onChanged",e,t,r,this)},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=r?[].concat(r,n):[].concat(n);v.deepEqual(this.$event.$subscribers,this.$event._getInitObject())||(n.$subscribers=this.$event.$subscribers),o<2&&o>-1&&this._entity&&(n._entity=M.createReferObject(this._entity)),n._elem=[];for(var s=0;s<this._list.length;s++){var a=this._list[s];a instanceof j?M.hasGuidObject(a,i)?n._elem.push(M.createReferObject(a)):n._elem.push(a.getObject(o,i)):n._elem.push(a)}n._key=[];for(s=0;s<this._keys.length;s++){var l=this._keys[s];n._key.push(l)}return n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n=r||t;if(t._elem.length!==t._key.length)throw new E(/EL05212/,null,[t._elem.length,t._key.length]);t.$subscribers&&(this.$event.$subscribers=t.$subscribers);for(var o=0;o<t._elem.length;o++){var i=t._elem[o];if(M.isGuidObject(i)){var s=M.createMetaObject(i,n);s.setObject(i,n),this.$elements[o]=s}else if(i.$ref){var a=M.findSetObject(i.$ref,n);if(!a)throw new E(/EL05213/,null,[o,i.$ref]);this.$elements[o]=a}else this.$elements[o]=i}},t.prototype.clone=function(e){var r=new t(e||this._entity),n=this.getObject();return n.$subscribers&&(r.$event.$subscribers=n.$subscribers),r.$elements=$.deepCopy(n._elem),r},t}(j),C=function(e){function t(t){e.call(this,t),this._elemTypes=x,this.autoChanges=!0}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner"],t.prototype._getPropDescriptor=function(e){return{get:function(){return this._elements[e]},set:function(t){if(this._elemTypes.length>0&&v.matchType([this._elemTypes],t),t._entity!==this._owner)throw new E(/EL05221/,null,[this.constructor.name]);this._transQueue.update(e,t,this._elements[e]),this.$elements[e]=t},configurable:!0,enumerable:!0}},t.prototype.add=function(e,t){var r=this._elements.length;return this.insertAt(r,e,t),r},t.prototype.insertAt=function(t,r,n){var o,i=n||!1,s=r._entity;if(!(r instanceof x))throw new E(/EL05222/,null,[]);if(s._guid!==this._owner._guid)throw new E(/EL05223/,null,[this.constructor.name]);if(!0===i)for(let e=0;e<r.count;e++)if(o=s.columns[e].valid(r[e]))throw new E(/EL05224/,null,[e,o.msg]);return e.prototype.insertAt.call(this,t,r)},t}(S);t?(exports.MetaRow=x,exports.MetaRowCollection=C):(e._L.MetaRow=x,e._L.MetaRowCollection=C,e._L.Meta.Entity.MetaRow=x,e._L.Meta.Entity.MetaRowCollection=C)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").MetaRegistry,a=require("logic-core").MetaElement;else var l=e._L.Message,c=e._L.ExtendError,u=e._L.Type,f=e._L.Util,p=e._L.MetaRegistry,h=e._L.MetaElement;var g=r||l,y=n||c,d=o||u,m=i||f,w=a||h,_=s||p;if(void 0===y)throw new Error(g.get("ES011",["ExtendError","extend-error"]));if(void 0===d)throw new Error(g.get("ES011",["Type","type"]));if(void 0===m)throw new Error(g.get("ES011",["Util","util"]));if(void 0===_)throw new Error(g.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===w)throw new Error(g.get("ES011",["MetaElement","meta-element"]));var b=function(e){function t(t,n){e.call(this,t);var o=t,i=null,s=null,a=null,l=this._type._VALUE_TYPE||[],c=null,u=null;Object.defineProperty(this,"$key",{get:function(){return o},set:function(e){r(e)&&(o=e)},configurable:!1,enumerable:!1}),Object.defineProperty(this,"$value",{get:function(){return i},set:function(e){i=e},configurable:!1,enumerable:!1}),Object.defineProperty(this,"$alias",{get:function(){return s},set:function(e){r(e)&&(s=e)},configurable:!1,enumerable:!1}),Object.defineProperty(this,"_entity",{get:function(){return a},set:function(e){if(void 0!==e&&!(e instanceof w&&e.instanceOf("BaseEntity")))throw new y(/EL05111/,null,[this.constructor.name]);a=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"_valueTypes",{get:function(){return l},set:function(e){var t=[];Array.isArray(e)?t=e:t.push(e),l=t},configurable:!1,enumerable:!0}),Object.defineProperty(this,"columnName",{get:function(){return this._name},set:function(e){if(e!==this.columnName){if("string"!=typeof e)throw new y(/EL05112/,null,[this.constructor.name,typeof e]);if(a&&a.columns.existColumnName(e))throw new y(/EL05113/,null,[this.constructor.name,e]);if(a&&a.columns.existAlias(e))throw new y(/EL05114/,null,[this.constructor.name,e]);this.$name=e}},configurable:!1,enumerable:!0}),Object.defineProperty(this,"alias",{get:function(){return"string"==typeof s?s:this.columnName},set:function(e){var t=this._entity;if("string"!=typeof e)throw new y(/EL05115/,null,[this.constructor.name,typeof e]);if(t&&t.columns.existAlias(e))throw new y(/EL05116/,null,[this.constructor.name,e]);s=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"default",{get:function(){return c},set:function(e){this._valueTypes.length>0&&d.matchType([this._valueTypes],e),c=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"caption",{get:function(){return u},set:function(e){if("string"!=typeof e)throw new y(/EL05117/,null,[this.constructor.name,typeof e]);u=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"value",{get:function(){return i},set:function(e){this._valueTypes.length>0&&d.matchType([this._valueTypes],e),i=e},configurable:!0,enumerable:!0}),n&&(a=n)}function r(e){return"string"==typeof e&&e.length>0}return m.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["columnName","_entity"],t._KIND="abstract",t._VALUE_TYPE=[],t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0;r?[].concat(r,n):[].concat(n);return o<2&&o>-1&&this._entity&&(n._entity=_.createReferObject(this._entity)),n.columnName=this.columnName,null!==this.default&&(n.default=this.default),null!==this.caption&&(n.caption=this.caption),null!==this.$alias&&(n.alias=this.$alias),null!==this.value&&(n.value=this.value),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n,o=r||t;if(t._entity){if(!(n=_.findSetObject(t._entity.$ref,o)))throw new y(/EL05118/,null,[t.name,t._entity.$ref]);this._entity=n}this.columnName=t.columnName,t.default&&(this.default=t.default),t.caption&&(this.caption=t.caption),t.alias&&(this.alias=t.alias),t.value&&(this.value=t.value)},t.prototype.clone=function(){throw new y(/EL05119/,null,[])},t}(w);t?exports.BaseColumn=b:(e._L.BaseColumn=b,e._L.Meta.Entity.BaseColumn=b)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").Observer,a=require("./base-column").BaseColumn;else var l=e._L.Message,c=e._L.ExtendError,u=e._L.Type,f=e._L.Util,p=e._L.Observer,h=e._L.BaseColumn;var g=r||l,y=n||c,d=o||u,m=i||f,w=s||p,_=a||h;if(void 0===y)throw new Error(g.get("ES011",["ExtendError","extend-error"]));if(void 0===d)throw new Error(g.get("ES011",["Type","type"]));if(void 0===m)throw new Error(g.get("ES011",["Util","util"]));if(void 0===w)throw new Error(g.get("ES011",["Observer","observer"]));if(void 0===_)throw new Error(g.get("ES011",["BaseColumn","base-column"]));var b=function(e){function t(t,r,n){e.call(this,t,r);var o=new w(this),i=!1,s=!1,a=[],l=null,c=null;Object.defineProperty(this,"$event",{get:function(){return o},configurable:!1,enumerable:!1}),Object.defineProperty(this,"isNotNull",{get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new y(/EL05131/,null,[this.constructor.name,typeof e]);i=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"isNullPass",{get:function(){return s},set:function(e){if("boolean"!=typeof e)throw new y(/EL05132/,null,[this.constructor.name,typeof e]);s=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"constraints",{get:function(){return a},set:function(e){var t=[];a=[],Array.isArray(e)?t=e:t.push(e);for(var r=0;t.length>r;r++)if("function"!=typeof t[r]&&("object"!=typeof t[r].regex||"string"!=typeof t[r].msg))throw new y(/EL05133/,null,[this.constructor.name,r,typeof e.regex,typeof e.msg]);a=t},configurable:!1,enumerable:!0}),Object.defineProperty(this,"value",{get:function(){var e;return"function"==typeof l?(e=l.call(this),null!==this.$value&&this.$value!==e&&(this._onChanged(e,this.$value),this.$value=e)):e=this.$value,null==e&&(e=this.$value||this.default),e},set:function(e){var t,r,n=this.$value;"function"==typeof c&&(r=c.call(this,e)),t=null===(t=void 0!==r?r:e)?"":t,this._valueTypes.length>0&&d.matchType([this._valueTypes],t),this.$value=t,n!==t&&t&&this._onChanged(t,n)},configurable:!0,enumerable:!0}),Object.defineProperty(this,"getter",{get:function(){return l},set:function(e){if("function"!=typeof e)throw new y(/EL05134/,null,[this.constructor.name,typeof e]);l=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"setter",{get:function(){return c},set:function(e){if("function"!=typeof e)throw new y(/EL05135/,null,[this.constructor.name,typeof e]);c=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"onChanged",{set:function(e){this.$event.subscribe(e,"onChanged")},configurable:!1,enumerable:!1}),n&&this._load(n)}return m.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["columnName","_entity"],t._VALUE_TYPE=[String,Number,Boolean],t.prototype._onChanged=function(e,t){t=t||this.$value,this.$event.publish("onChanged",e,t,this)},t.prototype._load=function(e){if("object"==typeof e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&["_valueTypes","alias","default","caption","value","isNotNull","isNullPass","constraints","getter","setter"].indexOf(t)>-1&&(this[t]=e[t]);["number","string","boolean"].indexOf(typeof e)>-1&&(this.value=e)},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r);r?[].concat(r,n):[].concat(n);return d.deepEqual(this.$event.$subscribers,this.$event._getInitObject())||(n.$subscribers=this.$event.$subscribers),!1!==this.isNotNull&&(n.isNotNull=this.isNotNull),!1!==this.isNullPass&&(n.isNullPass=this.isNullPass),this.constraints.length>0&&(n.constraints=m.deepCopy(this.constraints)),null!==this.getter&&(n.getter=this.getter),null!==this.setter&&(n.setter=this.setter),null!==this.value&&(n.value=this.value),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);t.$subscribers&&(this.$event.$subscribers=t.$subscribers),t.isNotNull&&(this.isNotNull=t.isNotNull),t.isNullPass&&(this.isNullPass=t.isNullPass),t.constraints&&(this.constraints=t.constraints),t.getter&&(this.getter=t.getter),t.setter&&(this.setter=t.setter),t.value&&(this.value=t.value)},t.prototype.clone=function(e){var r,n=this.getObject(),o=e||this._entity;return r=new t(this.columnName,o),n.default&&(r.default=n.default),n.caption&&(r.caption=n.caption),n.isNotNull&&(r.isNotNull=n.isNotNull),n.isNullPass&&(r.isNullPass=n.isNullPass),n.constraints&&(r.constraints=n.constraints),n.getter&&(r.getter=n.getter),n.setter&&(r.setter=n.setter),n.alias&&(r.alias=n.alias),r.value=n.value,r},t.prototype.addConstraint=function(e,t,r,n){n=n||!1;var o={};if("function"!=typeof e){if(!(e instanceof RegExp))throw new y(/EL05136/,null,[]);if("string"!=typeof t)throw new y(/EL05137/,null,[typeof t]);o.regex=e,o.msg=t,o.code=r,o.condition=n,this.constraints.push(o)}else this.constraints.push(e)},t.prototype.valid=function(e){var t,r={},n=null;if(r.value=e,r.msg="",r.code="",n=(n="number"==typeof(e=e||"")?String(e):e).trim(),(!1!==this.isNotNull||!0!==this.isNullPass||0!==n.length)&&!(!1===this.isNotNull&&0===this.constraints.length||!0===this.isNotNull&&0===this.constraints.length&&n.length>0)){if(!0===this.isNotNull&&0===this.constraints.length&&0===n.length)return r.msg=g.get("ES055",[this.name]),r.code=0,r;for(var o=0;this.constraints.length>o;o++){if("function"==typeof this.constraints[o])return this.constraints[o].call(this,this,n);if(t=n.match(this.constraints[o].regex),!1===this.constraints[o].condition&&null!==t||!0===this.constraints[o].condition&&null===t)return r.msg=g.get("ES056",[this.name,this.constraints[o].msg]),r.code=this.constraints[o].code,r}}},t}(_);t?exports.MetaColumn=b:(e._L.MetaColumn=b,e._L.Meta.Entity.MetaColumn=b)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Util,i=require("logic-core").Observer,s=require("logic-core").MetaObject,a=require("logic-core").MetaElement,l=require("./base-column").BaseColumn,c=require("logic-core").PropertyCollection,u=require("logic-core").MetaRegistry;else var f=e._L.Message,p=e._L.ExtendError,h=e._L.Util,g=e._L.Observer,y=e._L.MetaObject,d=e._L.MetaElement,m=e._L.BaseColumn,w=e._L.PropertyCollection,_=e._L.MetaRegistry;var b=r||f,E=n||p,v=o||h,$=i||g,L=u||_,O=s||y,j=a||d,S=l||m,M=c||w;if(void 0===E)throw new Error(b.get("ES011",["ExtendError","extend-error"]));if(void 0===v)throw new Error(b.get("ES011",["Util","util"]));if(void 0===$)throw new Error(b.get("ES011",["Observer","observer"]));if(void 0===L)throw new Error(b.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===O)throw new Error(b.get("ES011",["MetaObject","meta-object"]));if(void 0===j)throw new Error(b.get("ES011",["MetaElement","meta-element"]));if(void 0===S)throw new Error(b.get("ES011",["BaseColumn","base-column"]));if(void 0===M)throw new Error(b.get("ES011",["PropertyCollection","collection-property"]));var x=function(e){function t(t,r,n){e.call(this,t,r),n&&this._load(n)}return v.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["columnName","_entity","_property"],t._VALUE_TYPE=[{}],t.prototype._load=function(e){if("object"!=typeof e)throw new E(/EL05121/,null,["p_prop","object"]);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&["default","caption","value","alias"].indexOf(t)>-1&&(this[t]=e[t])},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=r?[].concat(r,n):[].concat(n),s=this.default,a=this.value;return s instanceof O&&(L.hasGuidObject(s,i)?n.default=L.createReferObject(s):n.default=s.getObject(o,i)),a instanceof O&&(L.hasGuidObject(a,i)?n.value=L.createReferObject(a):n.value=a.getObject(o,i)),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n,o,i=r||t;if("object"==typeof(n=t.default)&&null!==n)if(L.isGuidObject(n))(o=L.createMetaObject(n,i)).setObject(n,i),this.default=o;else if(n.$ref){if(!(s=L.findSetObject(n.$ref,i)))throw new E(/EL05122/,null,[n.$ref]);this.default=s}if("object"==typeof(n=t.value)&&null!==n)if(L.isGuidObject(n))(o=L.createMetaObject(n,i)).setObject(n,i),this.value=o;else if(n.$ref){var s;if(!(s=L.findSetObject(n.$ref,i)))throw new E(/EL05123/,null,[n.$ref]);this.value=s}},t.prototype.clone=function(e){var r,n=this.getObject(),o=e||this._entity;return r=new t(this.columnName,o),n.default&&(r.default=this.default),n.caption&&(r.caption=n.caption),n.alias&&(r.alias=n.alias),n.value&&(r.value=this.value),r},t}(S);t?exports.ObjectColumn=x:(e._L.ObjectColumn=x,e._L.Meta.Entity.ObjectColumn=x)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").MetaElement,a=require("./base-column").BaseColumn,l=require("logic-core").PropertyCollection,c=require("logic-core").MetaRegistry,u=require("./meta-column").MetaColumn;else var f=e._L.Message,p=e._L.ExtendError,h=e._L.Type,g=e._L.Util,y=e._L.MetaElement,d=e._L.BaseColumn,m=e._L.PropertyCollection,w=e._L.MetaRegistry,_=e._L.MetaColumn;var b=r||f,E=n||p,v=o||h,$=i||g,L=c||w,O=s||y,j=a||d,S=l||m,M=u||_;if(void 0===E)throw new Error(b.get("ES011",["ExtendError","extend-error"]));if(void 0===v)throw new Error(b.get("ES011",["Type","type"]));if(void 0===$)throw new Error(b.get("ES011",["Util","util"]));if(void 0===L)throw new Error(b.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===O)throw new Error(b.get("ES011",["MetaElement","meta-element"]));if(void 0===j)throw new Error(b.get("ES011",["BaseColumn","base-column"]));if(void 0===S)throw new Error(b.get("ES011",["PropertyCollection","collection-property"]));if(void 0===M)throw new Error(b.get("ES011",["MetaColumn","meta-column"]));var x=function(e){function t(t,r){var n;e.call(this,t),Object.defineProperty(this,"_baseType",{get:function(){return n},set:function(e){if("function"!=typeof e)throw new E(/EL05141/,null,[this.constructor.name,typeof e]);if(!v.isProtoChain(e,j))throw new E(/EL05142/,null,[this.constructor.name]);n=e},enumerable:!1,configurable:!1}),this._baseType=r,this.$KEYWORD=["_baseType","_ownerIsEntity","initValue","existAlias"],this.$KEYWORD=["existColumnName","alias","addValue"]}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner","_baseType"],t._KIND="abstract",t.prototype._ownerIsEntity=function(){return this._owner instanceof O&&this._owner.instanceOf("BaseEntity")},t.prototype.add=function(t,r){if(this._ownerIsEntity()&&this._owner.rows.count>0)throw new E(/EL05143/,null,[this._owner.rows.count]);if(this.existColumnName(t))throw new E(/EL05144/,null,[this.constructor.name,t]);if(this.existAlias(t))throw new E(/EL05145/,null,[this.constructor.name,t]);return e.prototype.add.call(this,t,r)},t.prototype.removeAt=function(t){if(this._owner.rows.count>0)throw new E(/EL05146/,null,[this._owner.rows.count]);return e.prototype.removeAt.call(this,t)},t.prototype.initValue=function(){for(var e=0;this.count>e;e++)this[e].value=this[e].default},t.prototype.existAlias=function(e){for(var t=0;this.count>t;t++)if(this[t].alias===e)return!0;return!1},t.prototype.existColumnName=function(e){for(var t=0;this.count>t;t++)if(this[t].columnName===e)return!0;return!1},t.prototype.alias=function(e){for(var t=0;this.count>t;t++)if(this[t].alias===e)return this[t]},t.prototype.addValue=function(){throw new E(/EL05147/,null,[])},t}(S),C=function(e){function t(t){e.call(this,t,M),this.$KEYWORD=["addValue"]}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner"],t.prototype.add=function(t){var r,n;if("string"==typeof t)n=t,r=this._ownerIsEntity()?new this._baseType(n,this._owner):new this._baseType(n);else{if(!(t instanceof j))throw new E(/EL05151/,null,[typeof t]);n=t.columnName,r=this._ownerIsEntity()&&t._owner!==this._owner?t.clone(this._owner):t}return e.prototype.add.call(this,n,r)},t.prototype.addValue=function(e,t){var r,n,o=this._baseType._VALUE_TYPE;if("string"!=typeof e)throw new E(/EL05152/,null,[typeof e]);return o.length>0&&v.matchType([o],t),n={value:t},r=new this._baseType(e,this._owner,n),this[this.add(r)]},t}(x),N=function(e){function t(t){e.call(this,t,M),Object.defineProperty(this,"_refEntities",{get:function(){for(var e=[],t=0;t<this.count;t++){var r=this[t];this._owner!==r._entity&&e.indexOf(r._entity)<0&&e.push(r._entity)}return e},configurable:!1,enumerable:!1}),this.$KEYWORD=["_refEntities","addValue","addEntity"]}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner","_baseCollection"],t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0;if(0===o)for(var i=0;i<n._elem.length;i++){var s=n._elem[i];if(o<2&&o>-1&&s._entity&&s._entity.$ref!==this._owner._guid){var a=L.createReferObject(s);n._elem[i]=a}}return n},t.prototype.add=function(t,r){var n,o,i;if(r&&!(r instanceof x))throw new E(/EL05161/,null,[]);if(t instanceof j)o=t.columnName,i=t;else{if("string"!=typeof t)throw new E(/EL05162/,null,[typeof t]);o=t,i=new this._baseType(o,this._owner)}return r instanceof x?n=r:this._owner&&this._owner._baseEntity&&this._owner._baseEntity.columns&&(n=this._owner._baseEntity.columns),n&&(n.contains(n[o])?i=n[o]:(n.add(t),i=n[o])),!i._entity&&this._ownerIsEntity()&&(i._entity=this._owner),e.prototype.add.call(this,o,i)},t.prototype.addValue=function(e,t,r){var n,o,i=this._baseType._VALUE_TYPE;if("string"!=typeof e)throw new E(/EL05163/,null,[typeof e]);return i.length>0&&v.matchType([i],t),o={value:t},n=new this._baseType(e,null,o),this[this.add(n,r)]},t.prototype.addEntity=function(e){if(void 0!==e&&!(e instanceof O&&e.instanceOf("BaseEntity")))throw new E(/EL05164/,null,[]);for(var t=0;e.columns.count>t;t++)this.add(e.columns[t])},t}(x);t?(exports.BaseColumnCollection=x,exports.MetaViewColumnCollection=N,exports.MetaTableColumnCollection=C):(e._L.BaseColumnCollection=x,e._L.MetaViewColumnCollection=N,e._L.MetaTableColumnCollection=C,e._L.Meta.Entity.BaseColumnCollection=x,e._L.Meta.Entity.MetaViewColumnCollection=N,e._L.Meta.Entity.MetaTableColumnCollection=C)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Util,i=require("./i-control-group").IGroupControl,s=require("./i-control-schema").ISchemaControl,a=require("./i-control-import").IImportControl,l=require("./i-control-export").IExportControl,c=require("logic-core").ISerialize,u=require("logic-core").MetaObject,f=require("logic-core").MetaElement,p=require("./meta-row").MetaRowCollection,h=require("./meta-row").MetaRow,g=require("./collection-column").BaseColumnCollection,y=require("logic-core").MetaRegistry;else var d=e._L.Message,m=e._L.ExtendError,w=e._L.Util,_=e._L.IGroupControl,b=e._L.ISchemaControl,E=e._L.IImportControl,v=e._L.IExportControl,$=e._L.ISerialize,L=e._L.MetaObject,O=e._L.MetaElement,j=e._L.MetaRowCollection,S=e._L.MetaRow,M=e._L.BaseColumnCollection,x=e._L.MetaRegistry;var C=r||d,N=n||m,A=o||w,T=u||L,I=f||O,P=i||_,R=s||b,k=a||E,q=l||v,G=c||$,D=p||j,U=h||S,B=g||M,Y=y||x;if(void 0===N)throw new Error(C.get("ES011",["ExtendError","extend-error"]));if(void 0===A)throw new Error(C.get("ES011",["Util","util"]));if(void 0===P)throw new Error(C.get("ES011",["IGroupControl","i-control-group"]));if(void 0===R)throw new Error(C.get("ES011",["ISchemaControl","i-control-schema"]));if(void 0===k)throw new Error(C.get("ES011",["IImportControl","i-control-import"]));if(void 0===q)throw new Error(C.get("ES011",["IExportControl","i-control-export"]));if(void 0===G)throw new Error(C.get("ES011",["ISerialize","i-serialize"]));if(void 0===Y)throw new Error(C.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===T)throw new Error(C.get("ES011",["MetaObject","meta-object"]));if(void 0===I)throw new Error(C.get("ES011",["MetaElement","meta-element"]));if(void 0===D)throw new Error(C.get("ES011",["MetaRowCollection","meta-row"]));if(void 0===U)throw new Error(C.get("ES011",["MetaRow","meta-row"]));if(void 0===B)throw new Error(C.get("ES011",["BaseColumnCollection","meta-column"]));var Q=function(e){function t(r){e.call(this,r);var n=null,o=new D(this);Object.defineProperty(this,"_metaSet",{get:function(){return n},set:function(e){if(!(e instanceof I&&e.instanceOf("MetaSet")))throw new N(/EL05311/,null,[this.constructor.name]);n=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"columns",{get:function(){throw new N(/EL05312/,null,[this.constructor.name])},configurable:!0,enumerable:!0}),Object.defineProperty(this,"rows",{get:function(){return o},configurable:!1,enumerable:!0}),A.implements(t,this)}function r(e){return"object"==typeof e&&null!==e}function n(e){return!!r(e)&&!(!r(e.columns)&&!r(e.rows))}return A.inherits(t,e),t._UNION=[P,R,k,q,G],t._NS="Meta.Entity",t._PARAMS=["name"],t._KIND="abstract",t.transformSchema=function(e){var t={},r=e;try{if(!n(e))throw new N(/EL05331/,null,[e.columns,e.rows]);r._guid&&(t._guid=r._guid),r._baseEntity&&(t._baseEntity=r._baseEntity),t.columns=function(e,t){for(var r={},n=0;n<e._elem.length;n++){var o=e._elem[n],i=e._key[n];r[i]={},o.$ref?r[i]=o:(o._entity&&o._entity.$ref!==t._guid&&(r[i]._entity={},r[i]._entity.$ref=o._entity.$ref),o._guid&&(r[i]._guid=o._guid),o.default&&(r[i].default=o.default),o.caption&&(r[i].caption=o.caption),o.isNotNull&&(r[i].isNotNull=o.isNotNull),o.isNullPass&&(r[i].isNullPass=o.isNullPass),Array.isArray(o.constraints)&&(r[i].constraints=A.deepCopy(o.constraints)),o.getter&&(r[i].getter=o.getter),o.setter&&(r[i].setter=o.setter),o.alias&&(r[i].alias=o.alias),o.value&&(r[i].value=o.value))}return r.$key=e._key,r}(r.columns,r),t.rows=function(e){for(var t=[],r=0;r<e._elem.length;r++){for(var n=e._elem[r],o={},i=0;i<n._elem.length;i++){var s=n._elem[i],a=n._key[i];o[a]=s}t.push(o)}return t}(r.rows)}catch(e){throw new N(/EL05332/,e,[])}return t},t.prototype._buildEntity=function(e,t,r){var n,o,i,s=this.clone();try{if(0===r.length)for(var a=0;a<this.columns.count;a++)e.columns.add(this.columns[a]);else for(a=0;a<r.length;a++){if(n=r[a],!("string"==typeof(i=n)&&i.length>0))throw new N(/EL05321/,null,[a,typeof n]);if(!this.columns.exist(n))throw new N(/EL05322/,null,[n]);o=this.columns.alias(n),e.columns.add(o)}for(a=0;a<s.rows.count;a++)(!t||"function"==typeof t&&t.call(this,s.rows[a],a,e))&&e.rows.add(l(s.rows[a]));return e}catch(e){throw new N(/EL05323/,e,[])}function l(t){var r,n;n=e.newRow();for(var o=0;o<e.columns.count;o++)n[r=e.columns[o].alias]=t[r];return n}},t.prototype._readEntity=function(e,r){var n=r||3,o=this;try{if(!(e instanceof t))throw new N(/EL05324/,null,[]);if("number"!=typeof n)throw new N(/EL05325/,null,[typeof n]);return n%2==1&&function(){if(o.rows.count>0)throw new N(/EL05327/,null,[n]);for(let n=0;n<e.columns.count;n++){var t=e.columns[n].clone(),r=e.columns.keyOf(n);if(o.columns.exist(r))throw new N(/EL05328/,null,[r]);o.columns.add(t)}}(),void(Math.floor(n/2)>=1&&function(){for(let n=0;n<e.rows.count;n++){var t=o.newRow(this);for(let i=0;i<o.columns.count;i++){var r=o.columns.keyOf(i);t[r]=e.rows[n][r]}o.rows.add(t)}}())}catch(e){throw new N(/EL05326/,e,[n])}},t.prototype._readSchema=function(e,t,n){var o,i=this,s=e,a=[],l=this.columns._baseType,c=n||e;try{if(s._guid&&Y.setMetaObject(s,this),s._baseEntity&&s._baseEntity.$ref&&(s._baseEntity=Y.findSetObject(s._baseEntity.$ref,c),!s._baseEntity))throw new N(/EL05329/,null,[s._baseEntity.$ref]);if(o=s.columns)if(o.$key&&Array.isArray(o.$key))for(var u=0;u<o.$key.length;u++)h(o.$key[u],o);else for(var f in o)h(f,o);if(!0===t&&s.rows&&(Array.isArray(s.rows)?a=s.rows:a.push(s.rows),Array.isArray(a)&&a.length>0&&"object"==typeof a[0]))for(var f in a[0])if(Object.prototype.hasOwnProperty.call(a[0],f)&&!this.columns.existAlias(f)){a[0][f];if(!this.columns.exist(f)){var p=new l(f,this);this.columns.add(p)}}}catch(e){throw new N(/EL0532A/,e,[])}function h(e,t){var n;if(r(t[e])){if(i.rows.count>0)throw new N(/EL0532B/,null,[]);var o=t[e],s={};if(r(o)&&o.$ref){if(!(n=Y.findSetObject(o.$ref,c)))throw new N(/EL0532C/,null,[e,o.$ref])}else{if(r(o._entity)&&o._entity.$ref&&(o._entity=Y.findSetObject(o._entity.$ref,c),!o._entity))throw new N(/EL0532D/,null,[e,"_entity"]);for(var a in o)s[a]=o[a];n=new l(e,null,s)}if(o._guid&&Y.setMetaObject(o,n),i.columns.exist(e))throw new N(/EL0532E/,null,[e]);i.columns.add(n)}}},t.prototype.getObject=function(t,r){var n,o,i=t||0;return n=e.prototype.getObject.call(this,t,r),o=r?[].concat(r,n):[].concat(n),i<2&&i>-1&&this._metaSet&&(n._metaSet=Y.createReferObject(this._metaSet)),n.columns=this.columns.getObject(i,o),n.rows=this.rows.getObject(i,o),n},t.prototype.clear=function(){this.rows.clear()},t.prototype.reset=function(){this.rows.clear(),this.columns.clear()},t.prototype.newRow=function(){return new U(this)},t.prototype.getValue=function(){for(var e=this.newRow(),t=0;this.columns.count>t;t++)e[t]=this.columns[t].value;return e},t.prototype.setValue=function(e){var t="";try{if(!(e instanceof U))throw new N(/EL05333/,null,[]);for(var r=0;this.columns.count>r;r++)t=this.columns[r].alias,this.columns[r].value=e[t]}catch(e){throw new N(/EL05334/,e,[])}},t.prototype.merge=function(e,r,n){var o,i,s,a,l,c,u,f=this,p=r||0,h=[];try{if(!(e instanceof t))throw new N(/EL05341/,null,[]);if("number"!=typeof r)throw new N(/EL05342/,null,[typeof r]);u=e.clone(),0===p&&function(){for(var e=0;e<f.rows.count;e++)h.push(f.rows[e].clone());f.rows.clear();for(var e=0;e<h.length;e++){i=f.newRow();for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,h[e][o]&&(i[o]=h[e][o]);f.rows.add(i,n)}a=u.rows;for(var e=0;e<a.count;e++){i=f.newRow(),s=a[e];for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,s[o]&&(i[o]=s[o]);f.rows.add(i,n)}}(),1===p&&function(){l=u.columns,a=u.rows;for(var e=0;e<l.count;e++){if(o=l[e].alias,f.columns.exist(o))throw new N(/EL05343/,null,[e,o]);if(f.columns.existAlias(o))throw new N(/EL05344/,null,[e,o])}for(var e=0;e<f.rows.count;e++)h.push(f.rows[e].clone());f.rows.clear();for(var e=0;e<l.count;e++){c=l[e].clone(f);var t=l[e].alias;c.columnName=t,c.$key=t,f.columns.add(c)}for(var e=0;e<h.length;e++){i=f.newRow();for(var r=0;r<f.columns.count;r++)o=f.columns[r].alias,h[e][o]?i[o]=h[e][o]:a[e]&&a[e][o]&&(i[o]=a[e][o]);f.rows.add(i,n)}}(),2===p&&function(){l=u.columns,a=u.rows;for(var e=0;e<f.rows.count;e++)h.push(f.rows[e].clone());f.rows.clear();for(var e=0;e<l.count;e++)o=l[e].alias,f.columns.exist(o)||((c=l[e].clone(f)).name=o,f.columns.add(c));for(var e=0;e<h.length;e++){i=f.newRow();for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,h[e][o]&&(i[o]=h[e][o]);f.rows.add(i,n)}for(var e=0;e<a.count;e++){i=f.newRow();for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,a[e][o]&&(i[o]=a[e][o]);f.rows.add(i,n)}}(),3===p&&function(){l=u.columns,a=u.rows;for(var e=0;e<l.count;e++){if(o=l[e].alias,f.columns.exist(o))throw new N(/EL05345/,null,[e,o]);if(f.columns.existAlias(o))throw new N(/EL05346/,null,[e,o])}for(var e=0;e<f.rows.count;e++)h.push(f.rows[e].clone());f.rows.clear();for(var e=0;e<l.count;e++)(c=l[e].clone(f)).name=l[e].alias,f.columns.add(c);for(var e=0;e<h.length;e++){i=f.newRow();for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,h[e][o]?i[o]=h[e][o]:i[o]=a[e][o];f.rows.add(i,n)}if(h.length<a.count)for(var e=h.length;e<a.count;e++){i=f.newRow();for(var t=0;t<f.columns.count;t++)o=f.columns[t].alias,a[e][o]&&(i[o]=a[e][o]);f.rows.add(i,n)}}()}catch(e){throw new N(/EL05347/,e,[p])}},t.prototype.select=function(e,t){var r,n,o,i=Array.prototype.slice.call(arguments),s=[];try{if(i=Array.prototype.slice.call(arguments),!(r=Y.ns.find("Meta.Entity.MetaView")))throw new N(/EL05335/,null,["Meta.Entity.MetaView"]);return o=new r("select"),"function"==typeof e?(n=e,Array.isArray(t)?s=t:i.length>1&&(s=i.splice(1))):s=Array.isArray(e)?e:i.splice(0),this._buildEntity(o,n,s)}catch(e){throw new N(/EL05336/,e,[])}},t.prototype.load=function(e,n){var o=e;try{if(e instanceof t)throw new N(/EL05351/,null,[]);if("string"==typeof o&&(o="function"==typeof n?n(o):JSON.parse(o,null)),!r(o))throw new N(/EL05352/,null,[typeof o]);this.setObject(o)}catch(e){throw new N(/EL05353/,e,[])}},t.prototype.output=function(e,t,r){var n;return n=this.getObject(e),"function"==typeof t?t(n,{space:r}):JSON.stringify(n,null,r)},t.prototype.read=function(e,n){var o=null,i=void 0===n?3:n;try{if(!r(e))throw new N(/EL05354/,null,[typeof e]);if("number"!=typeof i)throw new N(/EL05355/,null,[typeof i]);if(i<=0||i>3)throw new N(/EL05356/,null,[i]);e instanceof t?this._readEntity(e,n):((o=e.entity?e.entity:e.table?e.table:e).viewName&&(this.viewName=o.viewName),o.tableName&&(this.tableName=o.tableName),i%2==1&&this.readSchema(o,3===i),Math.floor(i/2)>=1&&this.readData(o))}catch(e){throw new N(/EL05357/,e,[])}},t.prototype.readSchema=function(e,o){var i=e;try{if(!r(e))throw new N(/EL05358/,null,[typeof e]);if(Y.isGuidObject(e)&&(Y.hasRefer(e)&&(i=Y.transformRefer(e)),i=t.transformSchema(i)),!n(i))throw new N(/EL05359/,null,[i.columns,i.rows]);this._readSchema(i,o)}catch(e){throw new N(/EL0535A/,e,[])}},t.prototype.readData=function(e){var o=e,i=[];try{if(!r(e))throw new N(/EL0535B/,null,[typeof e]);if(Y.isGuidObject(e)&&(Y.hasRefer(e)&&(o=Y.transformRefer(e)),o=t.transformSchema(e)),!n(o))throw new N(/EL0535C/,null,[o.columns,o.rows]);Array.isArray(o.rows)?i=o.rows:i.push(o.rows);for(var s=0;s<i.length&&this.columns.count>0;s++){var a=this.newRow(this);for(var l in i[s])Object.prototype.hasOwnProperty.call(a,l)&&(a[l]=i[s][l]);this.rows.add(a)}}catch(e){throw new N(/EL0535D/,e,[])}},t.prototype.write=function(e){var r,n=e||0;return r=this.getObject(n),t.transformSchema(r)},t.prototype.writeSchema=function(e){var t,r=e||0;return(t=this.write(r)).rows=[],t},t.prototype.writeData=function(e){var t,r=e||0;return(t=this.write(r)).columns={},t},t.prototype.clone=function(){throw new N(/EL05337/,null,[])},t.prototype.copy=function(){throw new N(/EL05348/,null,[])},t}(I);t?exports.BaseEntity=Q:(e._L.BaseEntity=Q,e._L.Meta.Entity.BaseEntity=Q)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").MetaRegistry,a=require("logic-core").MetaObject,l=require("./base-entity").BaseEntity,c=require("./i-transaction").ITransaction,u=require("logic-core").PropertyCollection,f=require("./collection-column").MetaTableColumnCollection;else{var p=e._L.Message,h=e._L.ExtendError,g=e._L.Type,y=e._L.Util,d=e._L.MetaRegistry,m=e._L.ITransaction,w=e._L.PropertyCollection,_=e._L.MetaObject,b=e._L.BaseEntity,E=e._L.MetaTableColumnCollection;h=e._L.ExtendError}var v=r||p,$=n||h,L=o||g,O=i||y,j=c||m,S=s||d,M=a||_,x=l||b,C=u||w,N=f||E;if(void 0===$)throw new Error(v.get("ES011",["ExtendError","extend-error"]));if(void 0===L)throw new Error(v.get("ES011",["Type","type"]));if(void 0===O)throw new Error(v.get("ES011",["Util","util"]));if(void 0===j)throw new Error(v.get("ES011",["ITransaction","i-transaction"]));if(void 0===S)throw new Error(v.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===M)throw new Error(v.get("ES011",["MetaObject","meta-object"]));if(void 0===C)throw new Error(v.get("ES011",["PropertyCollection","collection-property"]));if(void 0===x)throw new Error(v.get("ES011",["BaseEntity","base-entity"]));if(void 0===N)throw new Error(v.get("ES011",["MetaTableColumnCollection","meta-column"]));var A=function(e){function t(r){e.call(this,r);var n=new N(this);Object.defineProperty(this,"tableName",{get:function(){return this._name},set:function(e){if(e!==this.tableName){if("string"!=typeof e)throw new $(/EL05411/,null,[typeof e]);this.$name=e}},configurable:!1,enumerable:!0}),Object.defineProperty(this,"columns",{get:function(){return n},set:function(e){if(!(e instanceof N))throw new $(/EL05412/,null,[]);if(this.rows.count>0)throw new $(/EL05413/,null,[this.constructor.name,this.rows.count]);n=e},configurable:!1,enumerable:!0}),O.implements(t,this)}return O.inherits(t,e),t._UNION=[j],t._NS="Meta.Entity",t._PARAMS=["name"],t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r);r?[].concat(r,n):[].concat(n);return n.tableName=this.tableName,n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n,o=r||t;if(t._metaSet){if(!(n=S.findSetObject(t._metaSet.$ref,o)))throw new $(/EL05414/,null,[t._metaSet.$ref]);this._metaSet=n}this.columns.setObject(t.columns,o),this.rows.setObject(t.rows,o),this.tableName=t.tableName},t.prototype.clone=function(){for(var e=new t(this.tableName),r=0;r<this.columns.count;r++)e.columns.add(this.columns[r].clone(e));for(r=0;r<this.rows.count;r++)e.rows.add(this.rows[r].clone(e));return e},t.prototype.copy=function(e,r){var n=Array.prototype.slice.call(arguments),o=[],i=null,s=new t(this.tableName,this);return"function"==typeof e?(i=e,Array.isArray(r)?o=r:n.length>1&&(o=n.splice(1))):o=Array.isArray(e)?e:n.splice(0),this._buildEntity(s,i,o)},t.prototype.acceptChanges=function(){this.rows.commit()},t.prototype.rejectChanges=function(){this.rows.rollback()},t.prototype.getChanges=function(){return this.rows._transQueue.select()},t}(x),T=function(e){function t(t){e.call(this,t);var r=A;Object.defineProperty(this,"_baseType",{get:function(){return r},set:function(e){if("function"!=typeof e)throw new $(/EL05421/,null,[this.constructor.name,typeof e]);if(!L.isProtoChain(e,A))throw new $(/EL05422/,null,[this.constructor.name]);r=e},configurable:!1,enumerable:!0}),this._elemTypes=A,this.$KEYWORD=["_baseType","existTableName"]}return O.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner"],t.prototype.add=function(t){var r,n;if("string"==typeof t&&t.length>0)n=t,r=new this._baseType(n),this._owner instanceof M&&this._owner.instanceOf("MetaSet")&&(r._metaSet=this._owner);else{if(!(t instanceof A))throw new $(/EL05423/,null,[typeof any]);n=t.tableName,r=t,this._owner instanceof M&&this._owner.instanceOf("MetaSet")&&(t._metaSet=this._owner)}if(this.existTableName(n))throw new $(/EL05424/,null,[n]);return e.prototype.add.call(this,n,r)},t.prototype.existTableName=function(e){for(var t=0;this.count>t;t++)if(this[t].tableName===e)return!0;return!1},t}(C);t?(exports.MetaTable=A,exports.MetaTableCollection=T):(e._L.MetaTable=A,e._L.MetaTableCollection=T,e._L.Meta.Entity.MetaTable=A,e._L.Meta.Entity.MetaTableCollection=T)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Type,i=require("logic-core").Util,s=require("logic-core").PropertyCollection,a=require("logic-core").MetaObject,l=require("./base-entity").BaseEntity,c=require("logic-core").MetaRegistry,u=require("./collection-column").MetaViewColumnCollection;else var f=e._L.Message,p=e._L.ExtendError,h=e._L.Type,g=e._L.Util,y=e._L.PropertyCollection,d=e._L.MetaObject,m=e._L.BaseEntity,w=e._L.MetaRegistry,_=e._L.MetaViewColumnCollection;var b=r||f,E=n||p,v=o||h,$=i||g,L=s||y,O=a||d,j=l||m,S=c||w,M=u||_;if(void 0===E)throw new Error(b.get("ES011",["ExtendError","extend-error"]));if(void 0===v)throw new Error(b.get("ES011",["Type","type"]));if(void 0===$)throw new Error(b.get("ES011",["Util","util"]));if(void 0===S)throw new Error(b.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===O)throw new Error(b.get("ES011",["MetaObject","meta-object"]));if(void 0===L)throw new Error(b.get("ES011",["PropertyCollection","collection-property"]));if(void 0===j)throw new Error(b.get("ES011",["BaseEntity","base-entity"]));if(void 0===M)throw new Error(b.get("ES011",["MetaViewColumnCollection","meta-column"]));var x=function(e){function t(t,r){var n;e.call(this,t);var o=new M(this);Object.defineProperty(this,"viewName",{get:function(){return this._name},set:function(e){if(e!==this.viewName){if("string"!=typeof e)throw new E(/EL05431/,null,[typeof e]);this.$name=e}},configurable:!1,enumerable:!0}),Object.defineProperty(this,"columns",{get:function(){return o},set:function(e){if(!(e instanceof M))throw new E(/EL05432/,null,[this.constructor.name]);if(this.rows.count>0)throw new E(/EL05433/,null,[this.constructor.name,this.rows.count]);o=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"_baseEntity",{get:function(){return n},set:function(e){if(!(e instanceof j))throw new E(/EL05434/,null,[this.constructor.name]);n=e},configurable:!1,enumerable:!0}),r&&(this._baseEntity=r)}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["name","_baseEntity"],t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0;r?[].concat(r,n):[].concat(n);return n.viewName=this.viewName,o<2&&o>-1&&this._baseEntity&&(n._baseEntity=S.createReferObject(this._baseEntity)),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n,o,i=r||t;if(t._metaSet){if(!(n=S.findSetObject(t._metaSet.$ref,i)))throw new E(/EL05435/,null,[t._metaSet.$ref]);this._metaSet=n}if(t._baseEntity){if(!(o=S.findSetObject(t._baseEntity.$ref,i)))throw new E(/EL05436/,null,[t._baseEntity.$ref]);this._baseEntity=o}this.columns.setObject(t.columns,i),this.rows.setObject(t.rows,i),this.viewName=t.viewName},t.prototype.clone=function(){for(var e=new t(this.viewName,this._baseEntity),r=0;r<this.columns.count;r++)this.columns[r]._entity===this?e.columns.add(this.columns[r].clone(e)):e.columns.add(this.columns[r].clone());for(r=0;r<this.rows.count;r++)e.rows.add(this.rows[r].clone(e));return e},t.prototype.copy=function(e,r){var n=Array.prototype.slice.call(arguments),o=[],i=null,s=new t(this.viewName,this);this.clone();return"function"==typeof e?(i=e,Array.isArray(r)?o=r:n.length>1&&(o=n.splice(1))):o=Array.isArray(e)?e:n.splice(0),this._buildEntity(s,i,o)},t}(j),C=function(e){function t(t){e.call(this,t);var r=x;Object.defineProperty(this,"_baseType",{get:function(){return r},set:function(e){if("function"!=typeof e)throw new E(/EL05441/,null,[typeof e]);if(!v.isProtoChain(e,x))throw new E(/EL05442/,null,[this.constructor.name]);r=e},configurable:!1,enumerable:!0}),this._elemTypes=x,this.$KEYWORD=["_baseType","existViewName"]}return $.inherits(t,e),t._NS="Meta.Entity",t._PARAMS=["_owner"],t.prototype.add=function(t,r){var n,o;if(t instanceof x&&r)throw new E(/EL05443/,null,[]);if(r&&!(r instanceof j))throw new E(/EL05444/,null,[]);if("string"==typeof t)o=t,n=new this._baseType(o,r),this._owner instanceof O&&this._owner.instanceOf("MetaSet")&&(n._metaSet=this._owner);else{if(!(t instanceof x))throw new E(/EL05445/,null,[typeof t]);o=t.viewName,n=t,this._owner instanceof O&&this._owner.instanceOf("MetaSet")&&(t._metaSet=this._owner)}if(this.existViewName(o))throw new E(/EL05446/,null,[o]);return e.prototype.add.call(this,o,n)},t.prototype.existViewName=function(e){for(var t=0;this.count>t;t++)if(this[t].viewName===e)return!0;return!1},t}(L);t?(exports.MetaView=x,exports.MetaViewCollection=C):(e._L.MetaView=x,e._L.MetaViewCollection=C,e._L.Meta.Entity.MetaView=x,e._L.Meta.Entity.MetaViewCollection=C)}("undefined"!=typeof window?window:global),function(e){"use strict";var t="undefined"==typeof window;if(e._L=e._L||{},e._L.Meta=e._L.Meta||{},e._L.Meta.Entity=e._L.Meta.Entity||{},t)var r=require("logic-core").Message,n=require("logic-core").ExtendError,o=require("logic-core").Util,i=require("./i-control-schema").ISchemaControl,s=require("./i-control-import").IImportControl,a=require("./i-control-export").IExportControl,l=require("logic-core").ISerialize,c=require("./i-transaction").ITransaction,u=require("logic-core").MetaElement,f=require("./base-entity").BaseEntity,p=require("./meta-table").MetaTableCollection,h=require("./meta-view").MetaViewCollection,g=require("logic-core").MetaRegistry;else var y=e._L.Message,d=e._L.ExtendError,m=e._L.Util,w=e._L.ISchemaControl,_=e._L.IImportControl,b=e._L.IExportControl,E=e._L.ISerialize,v=e._L.ITransaction,$=e._L.MetaElement,L=e._L.BaseEntity,O=e._L.MetaTableCollection,j=e._L.MetaViewCollection,S=e._L.MetaRegistry;var M=r||y,x=n||d,C=o||m,N=i||w,A=s||_,T=a||b,I=l||E,P=c||v,R=u||$,k=f||L,q=p||O,G=h||j,D=g||S;if(void 0===x)throw new Error(M.get("ES011",["ExtendError","extend-error"]));if(void 0===C)throw new Error(M.get("ES011",["Util","util"]));if(void 0===N)throw new Error(M.get("ES011",["ISchemaControl","i-control-schema"]));if(void 0===A)throw new Error(M.get("ES011",["IImportControl","i-control-import"]));if(void 0===T)throw new Error(M.get("ES011",["IExportControl","i-control-export"]));if(void 0===I)throw new Error(M.get("ES011",["ISerialize","i-serialize"]));if(void 0===P)throw new Error(M.get("ES011",["ITransaction","i-transaction"]));if(void 0===D)throw new Error(M.get("ES011",["MetaRegistry","meta-registry"]));if(void 0===R)throw new Error(M.get("ES011",["MetaElement","meta-element"]));if(void 0===k)throw new Error(M.get("ES011",["BaseEntity","base-entity"]));if(void 0===q)throw new Error(M.get("ES011",["MetaTableCollection","meta-table"]));if(void 0===G)throw new Error(M.get("ES011",["MetaViewCollection","meta-view"]));var U=function(e){function t(r){e.call(this,r);var n=new q(this),o=new G(this);Object.defineProperty(this,"setName",{get:function(){return this._name},set:function(e){if("string"!=typeof e)throw new x(/EL05451/,null,[this.constructor.name,typeof e]);this.$name=e},configurable:!1,enumerable:!0}),Object.defineProperty(this,"tables",{get:function(){return n},configurable:!1,enumerable:!0}),Object.defineProperty(this,"views",{get:function(){return o},configurable:!1,enumerable:!0}),Object.defineProperty(this,"autoChanges",{set:function(e){if("boolean"!=typeof e)throw new x(/EL05452/,null,[this.constructor.name,typeof e]);for(var t=0;t<this.tables.count;t++)this.tables[t].rows.autoChanges=e},configurable:!1,enumerable:!0}),C.implements(t,this)}function r(e){return"object"==typeof e&&null!==e}function n(e){return!!r(e)&&!(!r(e.tables)&&!r(e.views))}return C.inherits(t,e),t._UNION=[N,A,T,P,I],t._NS="Meta.Entity",t._PARAMS=["name"],t.transformSchema=function(e){var t={};if(!n(e))throw new x(/EL05453/,null,[]);return t.name=e.name,t.tables=function(e){for(var t={},r=0;r<e._elem.length;r++){var n=e._elem[r],o=e._key[r];t[o]=k.transformSchema(n)}return t.$key=e._key,t}(e.tables),t.views=function(e){for(var t={},r=0;r<e._elem.length;r++){var n=e._elem[r],o=e._key[r];t[o]=k.transformSchema(n)}return t.$key=e._key,t}(e.views),t},t.prototype.getObject=function(t,r){var n=e.prototype.getObject.call(this,t,r),o=t||0,i=r?[].concat(r,n):[].concat(n);return n.setName=this.setName,n.tables=this.tables.getObject(o,i),n.views=this.views.getObject(o,i),n},t.prototype.setObject=function(t,r){e.prototype.setObject.call(this,t,r);var n=r||t;this.setName=t.setName,this.tables.setObject(t.tables,n),this.views.setObject(t.views,n)},t.prototype.clone=function(){for(var e=new t(this.setName),r=0;r<this.tables.count;r++)e.tables.add(this.tables[r].clone());for(r=0;r<this.views.count;r++)e.views.add(this.views[r].clone());return e},t.prototype.clear=function(){for(var e=0;e<this.tables.count;e++)this.tables[e].clear();for(e=0;e<this.views.count;e++)this.views[e].clear()},t.prototype.reset=function(){this.tables.clear(),this.views.clear()},t.prototype.load=function(e,n){var o=e;if(e instanceof t)throw new x(/ES022/,null,[]);if("string"==typeof o&&(o="function"==typeof n?n(o):JSON.parse(o,null)),!r(o))throw new x(/EL05455/,null,[typeof o]);this.setObject(o)},t.prototype.output=function(e,t,r){var n=this.getObject(e);return"function"==typeof t?t(n,{space:r}):JSON.stringify(n,null,r)},t.prototype.read=function(e,r){var n=void 0===r?3:r;if("object"!=typeof e||null===e)throw new x(/EL05456/,null,[typeof e]);if("number"!=typeof n)throw new x(/EL05457/,null,[typeof n]);if(e instanceof t){this.setName=e.setName;for(var o=0;o<e.tables.count;o++){var i=e.tables.keyOf(o);this.tables.indexOf(i,1)<0&&this.tables.add(i),this.tables[i]._readEntity(e.tables[i],r)}for(o=0;o<e.views.count;o++){i=e.views.keyOf(o);this.views.indexOf(i,1)<0&&this.views.add(i),this.views[i]._readEntity(e.views[i],r)}}else n%2==1&&this.readSchema(e,3===n),Math.floor(n/2)>=1&&this.readData(e)},t.prototype.readSchema=function(e,o){var i,s,a=null;if(!r(e))throw new x(/EL05458/,null,[typeof e]);if(a=e.metaSet||e.dataSet||e,D.isGuidObject(a)?(a=D.transformRefer(a),i=t.transformSchema(a)):i=a,!n(i))throw new x(/EL05459/,null,[i.tables,i.views]);if(i.tables)if((s=i.tables).$key&&Array.isArray(s.$key))for(var l=0;l<s.$key.length;l++)u(s.$key[l],s,this.tables);else for(var c in s)u(c,s,this.tables);if(i.views)if((s=i.views).$key&&Array.isArray(s.$key))for(l=0;l<s.$key.length;l++)u(s.$key[l],s,this.views);else for(var c in s)u(c,s,this.views);return;function u(e,t,r){var n=t[e];r.exist(e)||r.add(e),D.setMetaObject(n,r[e]),r[e]._readSchema(t[e],o,i)}},t.prototype.readData=function(e){var o,i=null;if(!r(e))throw new x(/EL0545A/,null,[typeof e]);if(i=e.metaSet||e.dataSet||e,D.isGuidObject(i)?(i=D.transformRefer(i),o=t.transformSchema(i)):o=i,!n(o))throw new x(/EL0545B/,null,[o.tables,o.views]);function s(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.exist(r)&&t[r].readData(e[r])}r(o.tables)&&s(o.tables,this.tables),r(o.views)&&s(o.views,this.views)},t.prototype.write=function(e){var r=this.getObject(e);return t.transformSchema(r)},t.prototype.writeSchema=function(e){var t=e||0,r=this.write(t);for(var n in r.tables)n.indexOf("$")<0&&(r.tables[n].rows=[]);for(var n in r.views)n.indexOf("$")<0&&(r.views[n].rows=[]);return r},t.prototype.writeData=function(e){var t=e||0,r=this.write(t);for(var n in r.tables)n.indexOf("$")<0&&(r.tables[n].columns={});for(var n in r.views)n.indexOf("$")<0&&(r.views[n].columns={});return r},t.prototype.acceptChanges=function(){for(let e=0;e<this.tables.count;e++)this.tables[e].acceptChanges()},t.prototype.rejectChanges=function(){for(let e=0;e<this.tables.count;e++)this.tables[e].rejectChanges()},t.prototype.hasChanges=function(){for(let e=0;e<this.tables.count;e++){if(this.tables[e].getChanges().length>0)return!0}return!1},t}(R);t?exports.MetaSet=U:(e._L.MetaSet=U,e._L.Meta.Entity.MetaSet=U)}("undefined"!=typeof window?window:global);